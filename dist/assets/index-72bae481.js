import{r as u,a as hs,R as ms,b as fs,c as ps}from"./vendor-70a87f68.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var Ft={exports:{}},La={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vs=u,xs=Symbol.for("react.element"),gs=Symbol.for("react.fragment"),js=Object.prototype.hasOwnProperty,bs=vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ys={key:!0,ref:!0,__self:!0,__source:!0};function Tt(a,t,r){var s,n={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)js.call(t,s)&&!ys.hasOwnProperty(s)&&(n[s]=t[s]);if(a&&a.defaultProps)for(s in t=a.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:xs,type:a,key:o,ref:i,props:n,_owner:bs.current}}La.Fragment=gs;La.jsx=Tt;La.jsxs=Tt;Ft.exports=La;var e=Ft.exports,Oa={},lt=hs;Oa.createRoot=lt.createRoot,Oa.hydrateRoot=lt.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ce(){return ce=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ce.apply(this,arguments)}var fe;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(fe||(fe={}));const ct="popstate";function Ns(a){a===void 0&&(a={});function t(s,n){let{pathname:o,search:i,hash:c}=s.location;return da("",{pathname:o,search:i,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Be(n)}return Ss(t,r,null,a)}function Z(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function Xe(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Es(){return Math.random().toString(36).substr(2,8)}function dt(a,t){return{usr:a.state,key:a.key,idx:t}}function da(a,t,r,s){return r===void 0&&(r=null),ce({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof t=="string"?Le(t):t,{state:r,key:t&&t.key||s||Es()})}function Be(a){let{pathname:t="/",search:r="",hash:s=""}=a;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Le(a){let t={};if(a){let r=a.indexOf("#");r>=0&&(t.hash=a.substr(r),a=a.substr(0,r));let s=a.indexOf("?");s>=0&&(t.search=a.substr(s),a=a.substr(0,s)),a&&(t.pathname=a)}return t}function Ss(a,t,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,i=n.history,c=fe.Pop,d=null,v=h();v==null&&(v=0,i.replaceState(ce({},i.state,{idx:v}),""));function h(){return(i.state||{idx:null}).idx}function l(){c=fe.Pop;let E=h(),F=E==null?null:E-v;v=E,d&&d({action:c,location:p.location,delta:F})}function j(E,F){c=fe.Push;let w=da(p.location,E,F);r&&r(w,E),v=h()+1;let _=dt(w,v),B=p.createHref(w);try{i.pushState(_,"",B)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;n.location.assign(B)}o&&d&&d({action:c,location:p.location,delta:1})}function f(E,F){c=fe.Replace;let w=da(p.location,E,F);r&&r(w,E),v=h();let _=dt(w,v),B=p.createHref(w);i.replaceState(_,"",B),o&&d&&d({action:c,location:p.location,delta:0})}function g(E){let F=n.location.origin!=="null"?n.location.origin:n.location.href,w=typeof E=="string"?E:Be(E);return w=w.replace(/ $/,"%20"),Z(F,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,F)}let p={get action(){return c},get location(){return a(n,i)},listen(E){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(ct,l),d=E,()=>{n.removeEventListener(ct,l),d=null}},createHref(E){return t(n,E)},createURL:g,encodeLocation(E){let F=g(E);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:j,replace:f,go(E){return i.go(E)}};return p}var ie;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(ie||(ie={}));const Cs=new Set(["lazy","caseSensitive","path","id","index","children"]);function ws(a){return a.index===!0}function Ca(a,t,r,s){return r===void 0&&(r=[]),s===void 0&&(s={}),a.map((n,o)=>{let i=[...r,String(o)],c=typeof n.id=="string"?n.id:i.join("-");if(Z(n.index!==!0||!n.children,"Cannot specify children on an index route"),Z(!s[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),ws(n)){let d=ce({},n,t(n),{id:c});return s[c]=d,d}else{let d=ce({},n,t(n),{id:c,children:void 0});return s[c]=d,n.children&&(d.children=Ca(n.children,t,i,s)),d}})}function Ue(a,t,r){return r===void 0&&(r="/"),Sa(a,t,r,!1)}function Sa(a,t,r,s){let n=typeof t=="string"?Le(t):t,o=Qe(n.pathname||"/",r);if(o==null)return null;let i=At(a);Ls(i);let c=null;for(let d=0;c==null&&d<i.length;++d){let v=Us(o);c=ks(i[d],v,s)}return c}function Ps(a,t){let{route:r,pathname:s,params:n}=a;return{id:r.id,pathname:s,params:n,data:t[r.id],handle:r.handle}}function At(a,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(o,i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};d.relativePath.startsWith("/")&&(Z(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let v=Pe([s,d.relativePath]),h=r.concat(d);o.children&&o.children.length>0&&(Z(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),At(o.children,t,h,v)),!(o.path==null&&!o.index)&&t.push({path:v,score:Ms(v,o.index),routesMeta:h})};return a.forEach((o,i)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))n(o,i);else for(let d of Mt(o.path))n(o,i,d)}),t}function Mt(a){let t=a.split("/");if(t.length===0)return[];let[r,...s]=t,n=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let i=Mt(s.join("/")),c=[];return c.push(...i.map(d=>d===""?o:[o,d].join("/"))),n&&c.push(...i),c.map(d=>a.startsWith("/")&&d===""?"/":d)}function Ls(a){a.sort((t,r)=>t.score!==r.score?r.score-t.score:Is(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Rs=/^:[\w-]+$/,Ds=3,_s=2,Fs=1,Ts=10,As=-2,ut=a=>a==="*";function Ms(a,t){let r=a.split("/"),s=r.length;return r.some(ut)&&(s+=As),t&&(s+=_s),r.filter(n=>!ut(n)).reduce((n,o)=>n+(Rs.test(o)?Ds:o===""?Fs:Ts),s)}function Is(a,t){return a.length===t.length&&a.slice(0,-1).every((s,n)=>s===t[n])?a[a.length-1]-t[t.length-1]:0}function ks(a,t,r){r===void 0&&(r=!1);let{routesMeta:s}=a,n={},o="/",i=[];for(let c=0;c<s.length;++c){let d=s[c],v=c===s.length-1,h=o==="/"?t:t.slice(o.length)||"/",l=ht({path:d.relativePath,caseSensitive:d.caseSensitive,end:v},h),j=d.route;if(!l&&v&&r&&!s[s.length-1].route.index&&(l=ht({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},h)),!l)return null;Object.assign(n,l.params),i.push({params:n,pathname:Pe([o,l.pathname]),pathnameBase:Bs(Pe([o,l.pathnameBase])),route:j}),l.pathnameBase!=="/"&&(o=Pe([o,l.pathnameBase]))}return i}function ht(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[r,s]=Os(a.path,a.caseSensitive,a.end),n=t.match(r);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:s.reduce((v,h,l)=>{let{paramName:j,isOptional:f}=h;if(j==="*"){let p=c[l]||"";i=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const g=c[l];return f&&!g?v[j]=void 0:v[j]=(g||"").replace(/%2F/g,"/"),v},{}),pathname:o,pathnameBase:i,pattern:a}}function Os(a,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Xe(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let s=[],n="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(s.push({paramName:"*"}),n+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":a!==""&&a!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function Us(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xe(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),a}}function Qe(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=a.charAt(r);return s&&s!=="/"?null:a.slice(r)||"/"}function zs(a,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:n=""}=typeof a=="string"?Le(a):a;return{pathname:r?r.startsWith("/")?r:$s(r,t):t,search:Hs(s),hash:Vs(n)}}function $s(a,t){let r=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Ma(a,t,r,s){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function It(a){return a.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ha(a,t){let r=It(a);return t?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Va(a,t,r,s){s===void 0&&(s=!1);let n;typeof a=="string"?n=Le(a):(n=ce({},a),Z(!n.pathname||!n.pathname.includes("?"),Ma("?","pathname","search",n)),Z(!n.pathname||!n.pathname.includes("#"),Ma("#","pathname","hash",n)),Z(!n.search||!n.search.includes("#"),Ma("#","search","hash",n)));let o=a===""||n.pathname==="",i=o?"/":n.pathname,c;if(i==null)c=r;else{let l=t.length-1;if(!s&&i.startsWith("..")){let j=i.split("/");for(;j[0]==="..";)j.shift(),l-=1;n.pathname=j.join("/")}c=l>=0?t[l]:"/"}let d=zs(n,c),v=i&&i!=="/"&&i.endsWith("/"),h=(o||i===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(v||h)&&(d.pathname+="/"),d}const Pe=a=>a.join("/").replace(/\/\/+/g,"/"),Bs=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),Hs=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,Vs=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,Ua=function(t,r){r===void 0&&(r=302);let s=r;typeof s=="number"?s={status:s}:typeof s.status>"u"&&(s.status=302);let n=new Headers(s.headers);return n.set("Location",t),new Response(null,ce({},s,{headers:n}))};class wa{constructor(t,r,s,n){n===void 0&&(n=!1),this.status=t,this.statusText=r||"",this.internal=n,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}}function ua(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const kt=["post","put","patch","delete"],Gs=new Set(kt),Ws=["get",...kt],qs=new Set(Ws),Ks=new Set([301,302,303,307,308]),Js=new Set([307,308]),Ia={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Xs={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},na={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ga=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ys=a=>({hasErrorBoundary:!!a.hasErrorBoundary}),Ot="remix-router-transitions";function Qs(a){const t=a.window?a.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",s=!r;Z(a.routes.length>0,"You must provide a non-empty routes array to createRouter");let n;if(a.mapRouteProperties)n=a.mapRouteProperties;else if(a.detectErrorBoundary){let m=a.detectErrorBoundary;n=x=>({hasErrorBoundary:m(x)})}else n=Ys;let o={},i=Ca(a.routes,n,void 0,o),c,d=a.basename||"/",v=a.dataStrategy||tr,h=a.patchRoutesOnNavigation,l=ce({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},a.future),j=null,f=new Set,g=null,p=null,E=null,F=a.hydrationData!=null,w=Ue(i,a.history.location,d),_=!1,B=null;if(w==null&&!h){let m=ge(404,{pathname:a.history.location.pathname}),{matches:x,route:S}=Et(i);w=x,B={[S.id]:m}}w&&!a.hydrationData&&ga(w,i,a.history.location.pathname).active&&(w=null);let I;if(w)if(w.some(m=>m.route.lazy))I=!1;else if(!w.some(m=>m.route.loader))I=!0;else if(l.v7_partialHydration){let m=a.hydrationData?a.hydrationData.loaderData:null,x=a.hydrationData?a.hydrationData.errors:null;if(x){let S=w.findIndex(L=>x[L.route.id]!==void 0);I=w.slice(0,S+1).every(L=>!$a(L.route,m,x))}else I=w.every(S=>!$a(S.route,m,x))}else I=a.hydrationData!=null;else if(I=!1,w=[],l.v7_partialHydration){let m=ga(null,i,a.history.location.pathname);m.active&&m.matches&&(_=!0,w=m.matches)}let U,b={historyAction:a.history.action,location:a.history.location,matches:w,initialized:I,navigation:Ia,restoreScrollPosition:a.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:a.hydrationData&&a.hydrationData.loaderData||{},actionData:a.hydrationData&&a.hydrationData.actionData||null,errors:a.hydrationData&&a.hydrationData.errors||B,fetchers:new Map,blockers:new Map},R=fe.Pop,C=!1,N,M=!1,J=new Map,ae=null,re=!1,de=!1,je=[],be=new Set,P=new Map,k=0,H=-1,T=new Map,Y=new Set,D=new Map,W=new Map,V=new Set,K=new Map,ee=new Map,me;function Me(){if(j=a.history.listen(m=>{let{action:x,location:S,delta:L}=m;if(me){me(),me=void 0;return}Xe(ee.size===0||L!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let A=rt({currentLocation:b.location,nextLocation:S,historyAction:x});if(A&&L!=null){let q=new Promise(X=>{me=X});a.history.go(L*-1),xa(A,{state:"blocked",location:S,proceed(){xa(A,{state:"proceeding",proceed:void 0,reset:void 0,location:S}),q.then(()=>a.history.go(L))},reset(){let X=new Map(b.blockers);X.set(A,na),xe({blockers:X})}});return}return Ie(x,S)}),r){vr(t,J);let m=()=>xr(t,J);t.addEventListener("pagehide",m),ae=()=>t.removeEventListener("pagehide",m)}return b.initialized||Ie(fe.Pop,b.location,{initialHydration:!0}),U}function Xt(){j&&j(),ae&&ae(),f.clear(),N&&N.abort(),b.fetchers.forEach((m,x)=>va(x)),b.blockers.forEach((m,x)=>st(x))}function Yt(m){return f.add(m),()=>f.delete(m)}function xe(m,x){x===void 0&&(x={}),b=ce({},b,m);let S=[],L=[];l.v7_fetcherPersist&&b.fetchers.forEach((A,q)=>{A.state==="idle"&&(V.has(q)?L.push(q):S.push(q))}),V.forEach(A=>{!b.fetchers.has(A)&&!P.has(A)&&L.push(A)}),[...f].forEach(A=>A(b,{deletedFetchers:L,viewTransitionOpts:x.viewTransitionOpts,flushSync:x.flushSync===!0})),l.v7_fetcherPersist?(S.forEach(A=>b.fetchers.delete(A)),L.forEach(A=>va(A))):L.forEach(A=>V.delete(A))}function Ge(m,x,S){var L,A;let{flushSync:q}=S===void 0?{}:S,X=b.actionData!=null&&b.navigation.formMethod!=null&&Ne(b.navigation.formMethod)&&b.navigation.state==="loading"&&((L=m.state)==null?void 0:L._isRedirect)!==!0,z;x.actionData?Object.keys(x.actionData).length>0?z=x.actionData:z=null:X?z=b.actionData:z=null;let $=x.loaderData?yt(b.loaderData,x.loaderData,x.matches||[],x.errors):b.loaderData,O=b.blockers;O.size>0&&(O=new Map(O),O.forEach((se,ve)=>O.set(ve,na)));let G=C===!0||b.navigation.formMethod!=null&&Ne(b.navigation.formMethod)&&((A=m.state)==null?void 0:A._isRedirect)!==!0;c&&(i=c,c=void 0),re||R===fe.Pop||(R===fe.Push?a.history.push(m,m.state):R===fe.Replace&&a.history.replace(m,m.state));let Q;if(R===fe.Pop){let se=J.get(b.location.pathname);se&&se.has(m.pathname)?Q={currentLocation:b.location,nextLocation:m}:J.has(m.pathname)&&(Q={currentLocation:m,nextLocation:b.location})}else if(M){let se=J.get(b.location.pathname);se?se.add(m.pathname):(se=new Set([m.pathname]),J.set(b.location.pathname,se)),Q={currentLocation:b.location,nextLocation:m}}xe(ce({},x,{actionData:z,loaderData:$,historyAction:R,location:m,initialized:!0,navigation:Ia,revalidation:"idle",restoreScrollPosition:ot(m,x.matches||b.matches),preventScrollReset:G,blockers:O}),{viewTransitionOpts:Q,flushSync:q===!0}),R=fe.Pop,C=!1,M=!1,re=!1,de=!1,je=[]}async function Xa(m,x){if(typeof m=="number"){a.history.go(m);return}let S=za(b.location,b.matches,d,l.v7_prependBasename,m,l.v7_relativeSplatPath,x==null?void 0:x.fromRouteId,x==null?void 0:x.relative),{path:L,submission:A,error:q}=mt(l.v7_normalizeFormMethod,!1,S,x),X=b.location,z=da(b.location,L,x&&x.state);z=ce({},z,a.history.encodeLocation(z));let $=x&&x.replace!=null?x.replace:void 0,O=fe.Push;$===!0?O=fe.Replace:$===!1||A!=null&&Ne(A.formMethod)&&A.formAction===b.location.pathname+b.location.search&&(O=fe.Replace);let G=x&&"preventScrollReset"in x?x.preventScrollReset===!0:void 0,Q=(x&&x.flushSync)===!0,se=rt({currentLocation:X,nextLocation:z,historyAction:O});if(se){xa(se,{state:"blocked",location:z,proceed(){xa(se,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),Xa(m,x)},reset(){let ve=new Map(b.blockers);ve.set(se,na),xe({blockers:ve})}});return}return await Ie(O,z,{submission:A,pendingError:q,preventScrollReset:G,replace:x&&x.replace,enableViewTransition:x&&x.viewTransition,flushSync:Q})}function Qt(){if(_a(),xe({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){Ie(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}Ie(R||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:M===!0})}}async function Ie(m,x,S){N&&N.abort(),N=null,R=m,re=(S&&S.startUninterruptedRevalidation)===!0,ls(b.location,b.matches),C=(S&&S.preventScrollReset)===!0,M=(S&&S.enableViewTransition)===!0;let L=c||i,A=S&&S.overrideNavigation,q=S!=null&&S.initialHydration&&b.matches&&b.matches.length>0&&!_?b.matches:Ue(L,x,d),X=(S&&S.flushSync)===!0;if(q&&b.initialized&&!de&&lr(b.location,x)&&!(S&&S.submission&&Ne(S.submission.formMethod))){Ge(x,{matches:q},{flushSync:X});return}let z=ga(q,L,x.pathname);if(z.active&&z.matches&&(q=z.matches),!q){let{error:le,notFoundMatches:oe,route:ue}=Fa(x.pathname);Ge(x,{matches:oe,loaderData:{},errors:{[ue.id]:le}},{flushSync:X});return}N=new AbortController;let $=Je(a.history,x,N.signal,S&&S.submission),O;if(S&&S.pendingError)O=[ze(q).route.id,{type:ie.error,error:S.pendingError}];else if(S&&S.submission&&Ne(S.submission.formMethod)){let le=await Zt($,x,S.submission,q,z.active,{replace:S.replace,flushSync:X});if(le.shortCircuited)return;if(le.pendingActionResult){let[oe,ue]=le.pendingActionResult;if(ye(ue)&&ua(ue.error)&&ue.error.status===404){N=null,Ge(x,{matches:le.matches,loaderData:{},errors:{[oe]:ue.error}});return}}q=le.matches||q,O=le.pendingActionResult,A=ka(x,S.submission),X=!1,z.active=!1,$=Je(a.history,$.url,$.signal)}let{shortCircuited:G,matches:Q,loaderData:se,errors:ve}=await es($,x,q,z.active,A,S&&S.submission,S&&S.fetcherSubmission,S&&S.replace,S&&S.initialHydration===!0,X,O);G||(N=null,Ge(x,ce({matches:Q||q},Nt(O),{loaderData:se,errors:ve})))}async function Zt(m,x,S,L,A,q){q===void 0&&(q={}),_a();let X=fr(x,S);if(xe({navigation:X},{flushSync:q.flushSync===!0}),A){let O=await ja(L,x.pathname,m.signal);if(O.type==="aborted")return{shortCircuited:!0};if(O.type==="error"){let G=ze(O.partialMatches).route.id;return{matches:O.partialMatches,pendingActionResult:[G,{type:ie.error,error:O.error}]}}else if(O.matches)L=O.matches;else{let{notFoundMatches:G,error:Q,route:se}=Fa(x.pathname);return{matches:G,pendingActionResult:[se.id,{type:ie.error,error:Q}]}}}let z,$=ca(L,x);if(!$.route.action&&!$.route.lazy)z={type:ie.error,error:ge(405,{method:m.method,pathname:x.pathname,routeId:$.route.id})};else if(z=(await aa("action",b,m,[$],L,null))[$.route.id],m.signal.aborted)return{shortCircuited:!0};if($e(z)){let O;return q&&q.replace!=null?O=q.replace:O=gt(z.response.headers.get("Location"),new URL(m.url),d)===b.location.pathname+b.location.search,await ke(m,z,!0,{submission:S,replace:O}),{shortCircuited:!0}}if(Te(z))throw ge(400,{type:"defer-action"});if(ye(z)){let O=ze(L,$.route.id);return(q&&q.replace)!==!0&&(R=fe.Push),{matches:L,pendingActionResult:[O.route.id,z]}}return{matches:L,pendingActionResult:[$.route.id,z]}}async function es(m,x,S,L,A,q,X,z,$,O,G){let Q=A||ka(x,q),se=q||X||Ct(Q),ve=!re&&(!l.v7_partialHydration||!$);if(L){if(ve){let he=Ya(G);xe(ce({navigation:Q},he!==void 0?{actionData:he}:{}),{flushSync:O})}let ne=await ja(S,x.pathname,m.signal);if(ne.type==="aborted")return{shortCircuited:!0};if(ne.type==="error"){let he=ze(ne.partialMatches).route.id;return{matches:ne.partialMatches,loaderData:{},errors:{[he]:ne.error}}}else if(ne.matches)S=ne.matches;else{let{error:he,notFoundMatches:qe,route:ra}=Fa(x.pathname);return{matches:qe,loaderData:{},errors:{[ra.id]:he}}}}let le=c||i,[oe,ue]=pt(a.history,b,S,se,x,l.v7_partialHydration&&$===!0,l.v7_skipActionErrorRevalidation,de,je,be,V,D,Y,le,d,G);if(Ta(ne=>!(S&&S.some(he=>he.route.id===ne))||oe&&oe.some(he=>he.route.id===ne)),H=++k,oe.length===0&&ue.length===0){let ne=at();return Ge(x,ce({matches:S,loaderData:{},errors:G&&ye(G[1])?{[G[0]]:G[1].error}:null},Nt(G),ne?{fetchers:new Map(b.fetchers)}:{}),{flushSync:O}),{shortCircuited:!0}}if(ve){let ne={};if(!L){ne.navigation=Q;let he=Ya(G);he!==void 0&&(ne.actionData=he)}ue.length>0&&(ne.fetchers=as(ue)),xe(ne,{flushSync:O})}ue.forEach(ne=>{De(ne.key),ne.controller&&P.set(ne.key,ne.controller)});let We=()=>ue.forEach(ne=>De(ne.key));N&&N.signal.addEventListener("abort",We);let{loaderResults:ta,fetcherResults:we}=await Qa(b,S,oe,ue,m);if(m.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",We),ue.forEach(ne=>P.delete(ne.key));let Ee=Na(ta);if(Ee)return await ke(m,Ee.result,!0,{replace:z}),{shortCircuited:!0};if(Ee=Na(we),Ee)return Y.add(Ee.key),await ke(m,Ee.result,!0,{replace:z}),{shortCircuited:!0};let{loaderData:Aa,errors:sa}=bt(b,S,ta,G,ue,we,K);K.forEach((ne,he)=>{ne.subscribe(qe=>{(qe||ne.done)&&K.delete(he)})}),l.v7_partialHydration&&$&&b.errors&&(sa=ce({},b.errors,sa));let Oe=at(),ba=tt(H),ya=Oe||ba||ue.length>0;return ce({matches:S,loaderData:Aa,errors:sa},ya?{fetchers:new Map(b.fetchers)}:{})}function Ya(m){if(m&&!ye(m[1]))return{[m[0]]:m[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function as(m){return m.forEach(x=>{let S=b.fetchers.get(x.key),L=oa(void 0,S?S.data:void 0);b.fetchers.set(x.key,L)}),new Map(b.fetchers)}function ts(m,x,S,L){if(s)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");De(m);let A=(L&&L.flushSync)===!0,q=c||i,X=za(b.location,b.matches,d,l.v7_prependBasename,S,l.v7_relativeSplatPath,x,L==null?void 0:L.relative),z=Ue(q,X,d),$=ga(z,q,X);if($.active&&$.matches&&(z=$.matches),!z){Ce(m,x,ge(404,{pathname:X}),{flushSync:A});return}let{path:O,submission:G,error:Q}=mt(l.v7_normalizeFormMethod,!0,X,L);if(Q){Ce(m,x,Q,{flushSync:A});return}let se=ca(z,O),ve=(L&&L.preventScrollReset)===!0;if(G&&Ne(G.formMethod)){ss(m,x,O,se,z,$.active,A,ve,G);return}D.set(m,{routeId:x,path:O}),rs(m,x,O,se,z,$.active,A,ve,G)}async function ss(m,x,S,L,A,q,X,z,$){_a(),D.delete(m);function O(pe){if(!pe.route.action&&!pe.route.lazy){let Ke=ge(405,{method:$.formMethod,pathname:S,routeId:x});return Ce(m,x,Ke,{flushSync:X}),!0}return!1}if(!q&&O(L))return;let G=b.fetchers.get(m);Re(m,pr($,G),{flushSync:X});let Q=new AbortController,se=Je(a.history,S,Q.signal,$);if(q){let pe=await ja(A,new URL(se.url).pathname,se.signal,m);if(pe.type==="aborted")return;if(pe.type==="error"){Ce(m,x,pe.error,{flushSync:X});return}else if(pe.matches){if(A=pe.matches,L=ca(A,S),O(L))return}else{Ce(m,x,ge(404,{pathname:S}),{flushSync:X});return}}P.set(m,Q);let ve=k,oe=(await aa("action",b,se,[L],A,m))[L.route.id];if(se.signal.aborted){P.get(m)===Q&&P.delete(m);return}if(l.v7_fetcherPersist&&V.has(m)){if($e(oe)||ye(oe)){Re(m,Fe(void 0));return}}else{if($e(oe))if(P.delete(m),H>ve){Re(m,Fe(void 0));return}else return Y.add(m),Re(m,oa($)),ke(se,oe,!1,{fetcherSubmission:$,preventScrollReset:z});if(ye(oe)){Ce(m,x,oe.error);return}}if(Te(oe))throw ge(400,{type:"defer-action"});let ue=b.navigation.location||b.location,We=Je(a.history,ue,Q.signal),ta=c||i,we=b.navigation.state!=="idle"?Ue(ta,b.navigation.location,d):b.matches;Z(we,"Didn't find any matches after fetcher action");let Ee=++k;T.set(m,Ee);let Aa=oa($,oe.data);b.fetchers.set(m,Aa);let[sa,Oe]=pt(a.history,b,we,$,ue,!1,l.v7_skipActionErrorRevalidation,de,je,be,V,D,Y,ta,d,[L.route.id,oe]);Oe.filter(pe=>pe.key!==m).forEach(pe=>{let Ke=pe.key,it=b.fetchers.get(Ke),us=oa(void 0,it?it.data:void 0);b.fetchers.set(Ke,us),De(Ke),pe.controller&&P.set(Ke,pe.controller)}),xe({fetchers:new Map(b.fetchers)});let ba=()=>Oe.forEach(pe=>De(pe.key));Q.signal.addEventListener("abort",ba);let{loaderResults:ya,fetcherResults:ne}=await Qa(b,we,sa,Oe,We);if(Q.signal.aborted)return;Q.signal.removeEventListener("abort",ba),T.delete(m),P.delete(m),Oe.forEach(pe=>P.delete(pe.key));let he=Na(ya);if(he)return ke(We,he.result,!1,{preventScrollReset:z});if(he=Na(ne),he)return Y.add(he.key),ke(We,he.result,!1,{preventScrollReset:z});let{loaderData:qe,errors:ra}=bt(b,we,ya,void 0,Oe,ne,K);if(b.fetchers.has(m)){let pe=Fe(oe.data);b.fetchers.set(m,pe)}tt(Ee),b.navigation.state==="loading"&&Ee>H?(Z(R,"Expected pending action"),N&&N.abort(),Ge(b.navigation.location,{matches:we,loaderData:qe,errors:ra,fetchers:new Map(b.fetchers)})):(xe({errors:ra,loaderData:yt(b.loaderData,qe,we,ra),fetchers:new Map(b.fetchers)}),de=!1)}async function rs(m,x,S,L,A,q,X,z,$){let O=b.fetchers.get(m);Re(m,oa($,O?O.data:void 0),{flushSync:X});let G=new AbortController,Q=Je(a.history,S,G.signal);if(q){let oe=await ja(A,new URL(Q.url).pathname,Q.signal,m);if(oe.type==="aborted")return;if(oe.type==="error"){Ce(m,x,oe.error,{flushSync:X});return}else if(oe.matches)A=oe.matches,L=ca(A,S);else{Ce(m,x,ge(404,{pathname:S}),{flushSync:X});return}}P.set(m,G);let se=k,le=(await aa("loader",b,Q,[L],A,m))[L.route.id];if(Te(le)&&(le=await Wa(le,Q.signal,!0)||le),P.get(m)===G&&P.delete(m),!Q.signal.aborted){if(V.has(m)){Re(m,Fe(void 0));return}if($e(le))if(H>se){Re(m,Fe(void 0));return}else{Y.add(m),await ke(Q,le,!1,{preventScrollReset:z});return}if(ye(le)){Ce(m,x,le.error);return}Z(!Te(le),"Unhandled fetcher deferred data"),Re(m,Fe(le.data))}}async function ke(m,x,S,L){let{submission:A,fetcherSubmission:q,preventScrollReset:X,replace:z}=L===void 0?{}:L;x.response.headers.has("X-Remix-Revalidate")&&(de=!0);let $=x.response.headers.get("Location");Z($,"Expected a Location header on the redirect Response"),$=gt($,new URL(m.url),d);let O=da(b.location,$,{_isRedirect:!0});if(r){let oe=!1;if(x.response.headers.has("X-Remix-Reload-Document"))oe=!0;else if(Ga.test($)){const ue=a.history.createURL($);oe=ue.origin!==t.location.origin||Qe(ue.pathname,d)==null}if(oe){z?t.location.replace($):t.location.assign($);return}}N=null;let G=z===!0||x.response.headers.has("X-Remix-Replace")?fe.Replace:fe.Push,{formMethod:Q,formAction:se,formEncType:ve}=b.navigation;!A&&!q&&Q&&se&&ve&&(A=Ct(b.navigation));let le=A||q;if(Js.has(x.response.status)&&le&&Ne(le.formMethod))await Ie(G,O,{submission:ce({},le,{formAction:$}),preventScrollReset:X||C,enableViewTransition:S?M:void 0});else{let oe=ka(O,A);await Ie(G,O,{overrideNavigation:oe,fetcherSubmission:q,preventScrollReset:X||C,enableViewTransition:S?M:void 0})}}async function aa(m,x,S,L,A,q){let X,z={};try{X=await sr(v,m,x,S,L,A,q,o,n)}catch($){return L.forEach(O=>{z[O.route.id]={type:ie.error,error:$}}),z}for(let[$,O]of Object.entries(X))if(cr(O)){let G=O.result;z[$]={type:ie.redirect,response:or(G,S,$,A,d,l.v7_relativeSplatPath)}}else z[$]=await nr(O);return z}async function Qa(m,x,S,L,A){let q=m.matches,X=aa("loader",m,A,S,x,null),z=Promise.all(L.map(async G=>{if(G.matches&&G.match&&G.controller){let se=(await aa("loader",m,Je(a.history,G.path,G.controller.signal),[G.match],G.matches,G.key))[G.match.route.id];return{[G.key]:se}}else return Promise.resolve({[G.key]:{type:ie.error,error:ge(404,{pathname:G.path})}})})),$=await X,O=(await z).reduce((G,Q)=>Object.assign(G,Q),{});return await Promise.all([hr(x,$,A.signal,q,m.loaderData),mr(x,O,L)]),{loaderResults:$,fetcherResults:O}}function _a(){de=!0,je.push(...Ta()),D.forEach((m,x)=>{P.has(x)&&be.add(x),De(x)})}function Re(m,x,S){S===void 0&&(S={}),b.fetchers.set(m,x),xe({fetchers:new Map(b.fetchers)},{flushSync:(S&&S.flushSync)===!0})}function Ce(m,x,S,L){L===void 0&&(L={});let A=ze(b.matches,x);va(m),xe({errors:{[A.route.id]:S},fetchers:new Map(b.fetchers)},{flushSync:(L&&L.flushSync)===!0})}function Za(m){return W.set(m,(W.get(m)||0)+1),V.has(m)&&V.delete(m),b.fetchers.get(m)||Xs}function va(m){let x=b.fetchers.get(m);P.has(m)&&!(x&&x.state==="loading"&&T.has(m))&&De(m),D.delete(m),T.delete(m),Y.delete(m),l.v7_fetcherPersist&&V.delete(m),be.delete(m),b.fetchers.delete(m)}function ns(m){let x=(W.get(m)||0)-1;x<=0?(W.delete(m),V.add(m),l.v7_fetcherPersist||va(m)):W.set(m,x),xe({fetchers:new Map(b.fetchers)})}function De(m){let x=P.get(m);x&&(x.abort(),P.delete(m))}function et(m){for(let x of m){let S=Za(x),L=Fe(S.data);b.fetchers.set(x,L)}}function at(){let m=[],x=!1;for(let S of Y){let L=b.fetchers.get(S);Z(L,"Expected fetcher: "+S),L.state==="loading"&&(Y.delete(S),m.push(S),x=!0)}return et(m),x}function tt(m){let x=[];for(let[S,L]of T)if(L<m){let A=b.fetchers.get(S);Z(A,"Expected fetcher: "+S),A.state==="loading"&&(De(S),T.delete(S),x.push(S))}return et(x),x.length>0}function os(m,x){let S=b.blockers.get(m)||na;return ee.get(m)!==x&&ee.set(m,x),S}function st(m){b.blockers.delete(m),ee.delete(m)}function xa(m,x){let S=b.blockers.get(m)||na;Z(S.state==="unblocked"&&x.state==="blocked"||S.state==="blocked"&&x.state==="blocked"||S.state==="blocked"&&x.state==="proceeding"||S.state==="blocked"&&x.state==="unblocked"||S.state==="proceeding"&&x.state==="unblocked","Invalid blocker state transition: "+S.state+" -> "+x.state);let L=new Map(b.blockers);L.set(m,x),xe({blockers:L})}function rt(m){let{currentLocation:x,nextLocation:S,historyAction:L}=m;if(ee.size===0)return;ee.size>1&&Xe(!1,"A router only supports one blocker at a time");let A=Array.from(ee.entries()),[q,X]=A[A.length-1],z=b.blockers.get(q);if(!(z&&z.state==="proceeding")&&X({currentLocation:x,nextLocation:S,historyAction:L}))return q}function Fa(m){let x=ge(404,{pathname:m}),S=c||i,{matches:L,route:A}=Et(S);return Ta(),{notFoundMatches:L,route:A,error:x}}function Ta(m){let x=[];return K.forEach((S,L)=>{(!m||m(L))&&(S.cancel(),x.push(L),K.delete(L))}),x}function is(m,x,S){if(g=m,E=x,p=S||null,!F&&b.navigation===Ia){F=!0;let L=ot(b.location,b.matches);L!=null&&xe({restoreScrollPosition:L})}return()=>{g=null,E=null,p=null}}function nt(m,x){return p&&p(m,x.map(L=>Ps(L,b.loaderData)))||m.key}function ls(m,x){if(g&&E){let S=nt(m,x);g[S]=E()}}function ot(m,x){if(g){let S=nt(m,x),L=g[S];if(typeof L=="number")return L}return null}function ga(m,x,S){if(h)if(m){if(Object.keys(m[0].params).length>0)return{active:!0,matches:Sa(x,S,d,!0)}}else return{active:!0,matches:Sa(x,S,d,!0)||[]};return{active:!1,matches:null}}async function ja(m,x,S,L){if(!h)return{type:"success",matches:m};let A=m;for(;;){let q=c==null,X=c||i,z=o;try{await h({signal:S,path:x,matches:A,fetcherKey:L,patch:(G,Q)=>{S.aborted||xt(G,Q,X,z,n)}})}catch(G){return{type:"error",error:G,partialMatches:A}}finally{q&&!S.aborted&&(i=[...i])}if(S.aborted)return{type:"aborted"};let $=Ue(X,x,d);if($)return{type:"success",matches:$};let O=Sa(X,x,d,!0);if(!O||A.length===O.length&&A.every((G,Q)=>G.route.id===O[Q].route.id))return{type:"success",matches:null};A=O}}function cs(m){o={},c=Ca(m,n,void 0,o)}function ds(m,x){let S=c==null;xt(m,x,c||i,o,n),S&&(i=[...i],xe({}))}return U={get basename(){return d},get future(){return l},get state(){return b},get routes(){return i},get window(){return t},initialize:Me,subscribe:Yt,enableScrollRestoration:is,navigate:Xa,fetch:ts,revalidate:Qt,createHref:m=>a.history.createHref(m),encodeLocation:m=>a.history.encodeLocation(m),getFetcher:Za,deleteFetcher:ns,dispose:Xt,getBlocker:os,deleteBlocker:st,patchRoutes:ds,_internalFetchControllers:P,_internalActiveDeferreds:K,_internalSetRoutes:cs},U}function Zs(a){return a!=null&&("formData"in a&&a.formData!=null||"body"in a&&a.body!==void 0)}function za(a,t,r,s,n,o,i,c){let d,v;if(i){d=[];for(let l of t)if(d.push(l),l.route.id===i){v=l;break}}else d=t,v=t[t.length-1];let h=Va(n||".",Ha(d,o),Qe(a.pathname,r)||a.pathname,c==="path");if(n==null&&(h.search=a.search,h.hash=a.hash),(n==null||n===""||n===".")&&v){let l=qa(h.search);if(v.route.index&&!l)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!v.route.index&&l){let j=new URLSearchParams(h.search),f=j.getAll("index");j.delete("index"),f.filter(p=>p).forEach(p=>j.append("index",p));let g=j.toString();h.search=g?"?"+g:""}}return s&&r!=="/"&&(h.pathname=h.pathname==="/"?r:Pe([r,h.pathname])),Be(h)}function mt(a,t,r,s){if(!s||!Zs(s))return{path:r};if(s.formMethod&&!ur(s.formMethod))return{path:r,error:ge(405,{method:s.formMethod})};let n=()=>({path:r,error:ge(400,{type:"invalid-body"})}),o=s.formMethod||"get",i=a?o.toUpperCase():o.toLowerCase(),c=$t(r);if(s.body!==void 0){if(s.formEncType==="text/plain"){if(!Ne(i))return n();let j=typeof s.body=="string"?s.body:s.body instanceof FormData||s.body instanceof URLSearchParams?Array.from(s.body.entries()).reduce((f,g)=>{let[p,E]=g;return""+f+p+"="+E+`
`},""):String(s.body);return{path:r,submission:{formMethod:i,formAction:c,formEncType:s.formEncType,formData:void 0,json:void 0,text:j}}}else if(s.formEncType==="application/json"){if(!Ne(i))return n();try{let j=typeof s.body=="string"?JSON.parse(s.body):s.body;return{path:r,submission:{formMethod:i,formAction:c,formEncType:s.formEncType,formData:void 0,json:j,text:void 0}}}catch{return n()}}}Z(typeof FormData=="function","FormData is not available in this environment");let d,v;if(s.formData)d=Ba(s.formData),v=s.formData;else if(s.body instanceof FormData)d=Ba(s.body),v=s.body;else if(s.body instanceof URLSearchParams)d=s.body,v=jt(d);else if(s.body==null)d=new URLSearchParams,v=new FormData;else try{d=new URLSearchParams(s.body),v=jt(d)}catch{return n()}let h={formMethod:i,formAction:c,formEncType:s&&s.formEncType||"application/x-www-form-urlencoded",formData:v,json:void 0,text:void 0};if(Ne(h.formMethod))return{path:r,submission:h};let l=Le(r);return t&&l.search&&qa(l.search)&&d.append("index",""),l.search="?"+d,{path:Be(l),submission:h}}function ft(a,t,r){r===void 0&&(r=!1);let s=a.findIndex(n=>n.route.id===t);return s>=0?a.slice(0,r?s+1:s):a}function pt(a,t,r,s,n,o,i,c,d,v,h,l,j,f,g,p){let E=p?ye(p[1])?p[1].error:p[1].data:void 0,F=a.createURL(t.location),w=a.createURL(n),_=r;o&&t.errors?_=ft(r,Object.keys(t.errors)[0],!0):p&&ye(p[1])&&(_=ft(r,p[0]));let B=p?p[1].statusCode:void 0,I=i&&B&&B>=400,U=_.filter((R,C)=>{let{route:N}=R;if(N.lazy)return!0;if(N.loader==null)return!1;if(o)return $a(N,t.loaderData,t.errors);if(er(t.loaderData,t.matches[C],R)||d.some(ae=>ae===R.route.id))return!0;let M=t.matches[C],J=R;return vt(R,ce({currentUrl:F,currentParams:M.params,nextUrl:w,nextParams:J.params},s,{actionResult:E,actionStatus:B,defaultShouldRevalidate:I?!1:c||F.pathname+F.search===w.pathname+w.search||F.search!==w.search||Ut(M,J)}))}),b=[];return l.forEach((R,C)=>{if(o||!r.some(re=>re.route.id===R.routeId)||h.has(C))return;let N=Ue(f,R.path,g);if(!N){b.push({key:C,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let M=t.fetchers.get(C),J=ca(N,R.path),ae=!1;j.has(C)?ae=!1:v.has(C)?(v.delete(C),ae=!0):M&&M.state!=="idle"&&M.data===void 0?ae=c:ae=vt(J,ce({currentUrl:F,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:r[r.length-1].params},s,{actionResult:E,actionStatus:B,defaultShouldRevalidate:I?!1:c})),ae&&b.push({key:C,routeId:R.routeId,path:R.path,matches:N,match:J,controller:new AbortController})}),[U,b]}function $a(a,t,r){if(a.lazy)return!0;if(!a.loader)return!1;let s=t!=null&&t[a.id]!==void 0,n=r!=null&&r[a.id]!==void 0;return!s&&n?!1:typeof a.loader=="function"&&a.loader.hydrate===!0?!0:!s&&!n}function er(a,t,r){let s=!t||r.route.id!==t.route.id,n=a[r.route.id]===void 0;return s||n}function Ut(a,t){let r=a.route.path;return a.pathname!==t.pathname||r!=null&&r.endsWith("*")&&a.params["*"]!==t.params["*"]}function vt(a,t){if(a.route.shouldRevalidate){let r=a.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function xt(a,t,r,s,n){var o;let i;if(a){let v=s[a];Z(v,"No route found to patch children into: routeId = "+a),v.children||(v.children=[]),i=v.children}else i=r;let c=t.filter(v=>!i.some(h=>zt(v,h))),d=Ca(c,n,[a||"_","patch",String(((o=i)==null?void 0:o.length)||"0")],s);i.push(...d)}function zt(a,t){return"id"in a&&"id"in t&&a.id===t.id?!0:a.index===t.index&&a.path===t.path&&a.caseSensitive===t.caseSensitive?(!a.children||a.children.length===0)&&(!t.children||t.children.length===0)?!0:a.children.every((r,s)=>{var n;return(n=t.children)==null?void 0:n.some(o=>zt(r,o))}):!1}async function ar(a,t,r){if(!a.lazy)return;let s=await a.lazy();if(!a.lazy)return;let n=r[a.id];Z(n,"No route found in manifest");let o={};for(let i in s){let d=n[i]!==void 0&&i!=="hasErrorBoundary";Xe(!d,'Route "'+n.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!d&&!Cs.has(i)&&(o[i]=s[i])}Object.assign(n,o),Object.assign(n,ce({},t(n),{lazy:void 0}))}async function tr(a){let{matches:t}=a,r=t.filter(n=>n.shouldLoad);return(await Promise.all(r.map(n=>n.resolve()))).reduce((n,o,i)=>Object.assign(n,{[r[i].route.id]:o}),{})}async function sr(a,t,r,s,n,o,i,c,d,v){let h=o.map(f=>f.route.lazy?ar(f.route,d,c):void 0),l=o.map((f,g)=>{let p=h[g],E=n.some(w=>w.route.id===f.route.id);return ce({},f,{shouldLoad:E,resolve:async w=>(w&&s.method==="GET"&&(f.route.lazy||f.route.loader)&&(E=!0),E?rr(t,s,f,p,w,v):Promise.resolve({type:ie.data,result:void 0}))})}),j=await a({matches:l,request:s,params:o[0].params,fetcherKey:i,context:v});try{await Promise.all(h)}catch{}return j}async function rr(a,t,r,s,n,o){let i,c,d=v=>{let h,l=new Promise((g,p)=>h=p);c=()=>h(),t.signal.addEventListener("abort",c);let j=g=>typeof v!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+a+'" [routeId: '+r.route.id+"]"))):v({request:t,params:r.params,context:o},...g!==void 0?[g]:[]),f=(async()=>{try{return{type:"data",result:await(n?n(p=>j(p)):j())}}catch(g){return{type:"error",result:g}}})();return Promise.race([f,l])};try{let v=r.route[a];if(s)if(v){let h,[l]=await Promise.all([d(v).catch(j=>{h=j}),s]);if(h!==void 0)throw h;i=l}else if(await s,v=r.route[a],v)i=await d(v);else if(a==="action"){let h=new URL(t.url),l=h.pathname+h.search;throw ge(405,{method:t.method,pathname:l,routeId:r.route.id})}else return{type:ie.data,result:void 0};else if(v)i=await d(v);else{let h=new URL(t.url),l=h.pathname+h.search;throw ge(404,{pathname:l})}Z(i.result!==void 0,"You defined "+(a==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+a+"` ")+"function. Please return a value or `null`.")}catch(v){return{type:ie.error,result:v}}finally{c&&t.signal.removeEventListener("abort",c)}return i}async function nr(a){let{result:t,type:r}=a;if(Bt(t)){let l;try{let j=t.headers.get("Content-Type");j&&/\bapplication\/json\b/.test(j)?t.body==null?l=null:l=await t.json():l=await t.text()}catch(j){return{type:ie.error,error:j}}return r===ie.error?{type:ie.error,error:new wa(t.status,t.statusText,l),statusCode:t.status,headers:t.headers}:{type:ie.data,data:l,statusCode:t.status,headers:t.headers}}if(r===ie.error){if(St(t)){var s,n;if(t.data instanceof Error){var o,i;return{type:ie.error,error:t.data,statusCode:(o=t.init)==null?void 0:o.status,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}}return{type:ie.error,error:new wa(((s=t.init)==null?void 0:s.status)||500,void 0,t.data),statusCode:ua(t)?t.status:void 0,headers:(n=t.init)!=null&&n.headers?new Headers(t.init.headers):void 0}}return{type:ie.error,error:t,statusCode:ua(t)?t.status:void 0}}if(dr(t)){var c,d;return{type:ie.deferred,deferredData:t,statusCode:(c=t.init)==null?void 0:c.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}if(St(t)){var v,h;return{type:ie.data,data:t.data,statusCode:(v=t.init)==null?void 0:v.status,headers:(h=t.init)!=null&&h.headers?new Headers(t.init.headers):void 0}}return{type:ie.data,data:t}}function or(a,t,r,s,n,o){let i=a.headers.get("Location");if(Z(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ga.test(i)){let c=s.slice(0,s.findIndex(d=>d.route.id===r)+1);i=za(new URL(t.url),c,n,!0,i,o),a.headers.set("Location",i)}return a}function gt(a,t,r){if(Ga.test(a)){let s=a,n=s.startsWith("//")?new URL(t.protocol+s):new URL(s),o=Qe(n.pathname,r)!=null;if(n.origin===t.origin&&o)return n.pathname+n.search+n.hash}return a}function Je(a,t,r,s){let n=a.createURL($t(t)).toString(),o={signal:r};if(s&&Ne(s.formMethod)){let{formMethod:i,formEncType:c}=s;o.method=i.toUpperCase(),c==="application/json"?(o.headers=new Headers({"Content-Type":c}),o.body=JSON.stringify(s.json)):c==="text/plain"?o.body=s.text:c==="application/x-www-form-urlencoded"&&s.formData?o.body=Ba(s.formData):o.body=s.formData}return new Request(n,o)}function Ba(a){let t=new URLSearchParams;for(let[r,s]of a.entries())t.append(r,typeof s=="string"?s:s.name);return t}function jt(a){let t=new FormData;for(let[r,s]of a.entries())t.append(r,s);return t}function ir(a,t,r,s,n){let o={},i=null,c,d=!1,v={},h=r&&ye(r[1])?r[1].error:void 0;return a.forEach(l=>{if(!(l.route.id in t))return;let j=l.route.id,f=t[j];if(Z(!$e(f),"Cannot handle redirect results in processLoaderData"),ye(f)){let g=f.error;if(h!==void 0&&(g=h,h=void 0),i=i||{},n)i[j]=g;else{let p=ze(a,j);i[p.route.id]==null&&(i[p.route.id]=g)}o[j]=void 0,d||(d=!0,c=ua(f.error)?f.error.status:500),f.headers&&(v[j]=f.headers)}else Te(f)?(s.set(j,f.deferredData),o[j]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!d&&(c=f.statusCode),f.headers&&(v[j]=f.headers)):(o[j]=f.data,f.statusCode&&f.statusCode!==200&&!d&&(c=f.statusCode),f.headers&&(v[j]=f.headers))}),h!==void 0&&r&&(i={[r[0]]:h},o[r[0]]=void 0),{loaderData:o,errors:i,statusCode:c||200,loaderHeaders:v}}function bt(a,t,r,s,n,o,i){let{loaderData:c,errors:d}=ir(t,r,s,i,!1);return n.forEach(v=>{let{key:h,match:l,controller:j}=v,f=o[h];if(Z(f,"Did not find corresponding fetcher result"),!(j&&j.signal.aborted))if(ye(f)){let g=ze(a.matches,l==null?void 0:l.route.id);d&&d[g.route.id]||(d=ce({},d,{[g.route.id]:f.error})),a.fetchers.delete(h)}else if($e(f))Z(!1,"Unhandled fetcher revalidation redirect");else if(Te(f))Z(!1,"Unhandled fetcher deferred data");else{let g=Fe(f.data);a.fetchers.set(h,g)}}),{loaderData:c,errors:d}}function yt(a,t,r,s){let n=ce({},t);for(let o of r){let i=o.route.id;if(t.hasOwnProperty(i)?t[i]!==void 0&&(n[i]=t[i]):a[i]!==void 0&&o.route.loader&&(n[i]=a[i]),s&&s.hasOwnProperty(i))break}return n}function Nt(a){return a?ye(a[1])?{actionData:{}}:{actionData:{[a[0]]:a[1].data}}:{}}function ze(a,t){return(t?a.slice(0,a.findIndex(s=>s.route.id===t)+1):[...a]).reverse().find(s=>s.route.hasErrorBoundary===!0)||a[0]}function Et(a){let t=a.length===1?a[0]:a.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ge(a,t){let{pathname:r,routeId:s,method:n,type:o,message:i}=t===void 0?{}:t,c="Unknown Server Error",d="Unknown @remix-run/router error";return a===400?(c="Bad Request",n&&r&&s?d="You made a "+n+' request to "'+r+'" but '+('did not provide a `loader` for route "'+s+'", ')+"so there is no way to handle the request.":o==="defer-action"?d="defer() is not supported in actions":o==="invalid-body"&&(d="Unable to encode submission body")):a===403?(c="Forbidden",d='Route "'+s+'" does not match URL "'+r+'"'):a===404?(c="Not Found",d='No route matches URL "'+r+'"'):a===405&&(c="Method Not Allowed",n&&r&&s?d="You made a "+n.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+s+'", ')+"so there is no way to handle the request.":n&&(d='Invalid request method "'+n.toUpperCase()+'"')),new wa(a||500,c,new Error(d),!0)}function Na(a){let t=Object.entries(a);for(let r=t.length-1;r>=0;r--){let[s,n]=t[r];if($e(n))return{key:s,result:n}}}function $t(a){let t=typeof a=="string"?Le(a):a;return Be(ce({},t,{hash:""}))}function lr(a,t){return a.pathname!==t.pathname||a.search!==t.search?!1:a.hash===""?t.hash!=="":a.hash===t.hash?!0:t.hash!==""}function cr(a){return Bt(a.result)&&Ks.has(a.result.status)}function Te(a){return a.type===ie.deferred}function ye(a){return a.type===ie.error}function $e(a){return(a&&a.type)===ie.redirect}function St(a){return typeof a=="object"&&a!=null&&"type"in a&&"data"in a&&"init"in a&&a.type==="DataWithResponseInit"}function dr(a){let t=a;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Bt(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.headers=="object"&&typeof a.body<"u"}function ur(a){return qs.has(a.toLowerCase())}function Ne(a){return Gs.has(a.toLowerCase())}async function hr(a,t,r,s,n){let o=Object.entries(t);for(let i=0;i<o.length;i++){let[c,d]=o[i],v=a.find(j=>(j==null?void 0:j.route.id)===c);if(!v)continue;let h=s.find(j=>j.route.id===v.route.id),l=h!=null&&!Ut(h,v)&&(n&&n[v.route.id])!==void 0;Te(d)&&l&&await Wa(d,r,!1).then(j=>{j&&(t[c]=j)})}}async function mr(a,t,r){for(let s=0;s<r.length;s++){let{key:n,routeId:o,controller:i}=r[s],c=t[n];a.find(v=>(v==null?void 0:v.route.id)===o)&&Te(c)&&(Z(i,"Expected an AbortController for revalidating fetcher deferred result"),await Wa(c,i.signal,!0).then(v=>{v&&(t[n]=v)}))}}async function Wa(a,t,r){if(r===void 0&&(r=!1),!await a.deferredData.resolveData(t)){if(r)try{return{type:ie.data,data:a.deferredData.unwrappedData}}catch(n){return{type:ie.error,error:n}}return{type:ie.data,data:a.deferredData.data}}}function qa(a){return new URLSearchParams(a).getAll("index").some(t=>t==="")}function ca(a,t){let r=typeof t=="string"?Le(t).search:t.search;if(a[a.length-1].route.index&&qa(r||""))return a[a.length-1];let s=It(a);return s[s.length-1]}function Ct(a){let{formMethod:t,formAction:r,formEncType:s,text:n,formData:o,json:i}=a;if(!(!t||!r||!s)){if(n!=null)return{formMethod:t,formAction:r,formEncType:s,formData:void 0,json:void 0,text:n};if(o!=null)return{formMethod:t,formAction:r,formEncType:s,formData:o,json:void 0,text:void 0};if(i!==void 0)return{formMethod:t,formAction:r,formEncType:s,formData:void 0,json:i,text:void 0}}}function ka(a,t){return t?{state:"loading",location:a,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:a,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function fr(a,t){return{state:"submitting",location:a,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function oa(a,t){return a?{state:"loading",formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function pr(a,t){return{state:"submitting",formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text,data:t?t.data:void 0}}function Fe(a){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:a}}function vr(a,t){try{let r=a.sessionStorage.getItem(Ot);if(r){let s=JSON.parse(r);for(let[n,o]of Object.entries(s||{}))o&&Array.isArray(o)&&t.set(n,new Set(o||[]))}}catch{}}function xr(a,t){if(t.size>0){let r={};for(let[s,n]of t)r[s]=[...n];try{a.sessionStorage.setItem(Ot,JSON.stringify(r))}catch(s){Xe(!1,"Failed to save applied view transitions in sessionStorage ("+s+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ha.apply(this,arguments)}const Ra=u.createContext(null),Ht=u.createContext(null),Ve=u.createContext(null),Da=u.createContext(null),Ae=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Vt=u.createContext(null);function gr(a,t){let{relative:r}=t===void 0?{}:t;pa()||Z(!1);let{basename:s,navigator:n}=u.useContext(Ve),{hash:o,pathname:i,search:c}=Wt(a,{relative:r}),d=i;return s!=="/"&&(d=i==="/"?s:Pe([s,i])),n.createHref({pathname:d,search:c,hash:o})}function pa(){return u.useContext(Da)!=null}function Ze(){return pa()||Z(!1),u.useContext(Da).location}function Gt(a){u.useContext(Ve).static||u.useLayoutEffect(a)}function Ka(){let{isDataRoute:a}=u.useContext(Ae);return a?Fr():jr()}function jr(){pa()||Z(!1);let a=u.useContext(Ra),{basename:t,future:r,navigator:s}=u.useContext(Ve),{matches:n}=u.useContext(Ae),{pathname:o}=Ze(),i=JSON.stringify(Ha(n,r.v7_relativeSplatPath)),c=u.useRef(!1);return Gt(()=>{c.current=!0}),u.useCallback(function(v,h){if(h===void 0&&(h={}),!c.current)return;if(typeof v=="number"){s.go(v);return}let l=Va(v,JSON.parse(i),o,h.relative==="path");a==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:Pe([t,l.pathname])),(h.replace?s.replace:s.push)(l,h.state,h)},[t,s,i,o,a])}const br=u.createContext(null);function yr(a){let t=u.useContext(Ae).outlet;return t&&u.createElement(br.Provider,{value:a},t)}function Wt(a,t){let{relative:r}=t===void 0?{}:t,{future:s}=u.useContext(Ve),{matches:n}=u.useContext(Ae),{pathname:o}=Ze(),i=JSON.stringify(Ha(n,s.v7_relativeSplatPath));return u.useMemo(()=>Va(a,JSON.parse(i),o,r==="path"),[a,i,o,r])}function Nr(a,t,r,s){pa()||Z(!1);let{navigator:n}=u.useContext(Ve),{matches:o}=u.useContext(Ae),i=o[o.length-1],c=i?i.params:{};i&&i.pathname;let d=i?i.pathnameBase:"/";i&&i.route;let v=Ze(),h;if(t){var l;let E=typeof t=="string"?Le(t):t;d==="/"||(l=E.pathname)!=null&&l.startsWith(d)||Z(!1),h=E}else h=v;let j=h.pathname||"/",f=j;if(d!=="/"){let E=d.replace(/^\//,"").split("/");f="/"+j.replace(/^\//,"").split("/").slice(E.length).join("/")}let g=Ue(a,{pathname:f}),p=Pr(g&&g.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:Pe([d,n.encodeLocation?n.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:Pe([d,n.encodeLocation?n.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,r,s);return t&&p?u.createElement(Da.Provider,{value:{location:ha({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:fe.Pop}},p):p}function Er(){let a=_r(),t=ua(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),r=a instanceof Error?a.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:n},r):null,o)}const Sr=u.createElement(Er,null);class Cr extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?u.createElement(Ae.Provider,{value:this.props.routeContext},u.createElement(Vt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wr(a){let{routeContext:t,match:r,children:s}=a,n=u.useContext(Ra);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(Ae.Provider,{value:t},s)}function Pr(a,t,r,s){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),a==null){var o;if(!r)return null;if(r.errors)a=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)a=r.matches;else return null}let i=a,c=(n=r)==null?void 0:n.errors;if(c!=null){let h=i.findIndex(l=>l.route.id&&(c==null?void 0:c[l.route.id])!==void 0);h>=0||Z(!1),i=i.slice(0,Math.min(i.length,h+1))}let d=!1,v=-1;if(r&&s&&s.v7_partialHydration)for(let h=0;h<i.length;h++){let l=i[h];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(v=h),l.route.id){let{loaderData:j,errors:f}=r,g=l.route.loader&&j[l.route.id]===void 0&&(!f||f[l.route.id]===void 0);if(l.route.lazy||g){d=!0,v>=0?i=i.slice(0,v+1):i=[i[0]];break}}}return i.reduceRight((h,l,j)=>{let f,g=!1,p=null,E=null;r&&(f=c&&l.route.id?c[l.route.id]:void 0,p=l.route.errorElement||Sr,d&&(v<0&&j===0?(Tr("route-fallback",!1),g=!0,E=null):v===j&&(g=!0,E=l.route.hydrateFallbackElement||null)));let F=t.concat(i.slice(0,j+1)),w=()=>{let _;return f?_=p:g?_=E:l.route.Component?_=u.createElement(l.route.Component,null):l.route.element?_=l.route.element:_=h,u.createElement(wr,{match:l,routeContext:{outlet:h,matches:F,isDataRoute:r!=null},children:_})};return r&&(l.route.ErrorBoundary||l.route.errorElement||j===0)?u.createElement(Cr,{location:r.location,revalidation:r.revalidation,component:p,error:f,children:w(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):w()},null)}var qt=function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a}(qt||{}),Pa=function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a}(Pa||{});function Lr(a){let t=u.useContext(Ra);return t||Z(!1),t}function Rr(a){let t=u.useContext(Ht);return t||Z(!1),t}function Dr(a){let t=u.useContext(Ae);return t||Z(!1),t}function Kt(a){let t=Dr(),r=t.matches[t.matches.length-1];return r.route.id||Z(!1),r.route.id}function _r(){var a;let t=u.useContext(Vt),r=Rr(Pa.UseRouteError),s=Kt(Pa.UseRouteError);return t!==void 0?t:(a=r.errors)==null?void 0:a[s]}function Fr(){let{router:a}=Lr(qt.UseNavigateStable),t=Kt(Pa.UseNavigateStable),r=u.useRef(!1);return Gt(()=>{r.current=!0}),u.useCallback(function(n,o){o===void 0&&(o={}),r.current&&(typeof n=="number"?a.navigate(n):a.navigate(n,ha({fromRouteId:t},o)))},[a,t])}const wt={};function Tr(a,t,r){!t&&!wt[a]&&(wt[a]=!0)}function Ar(a,t){a==null||a.v7_startTransition,(a==null?void 0:a.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Mr(a){return yr(a.context)}function Ir(a){let{basename:t="/",children:r=null,location:s,navigationType:n=fe.Pop,navigator:o,static:i=!1,future:c}=a;pa()&&Z(!1);let d=t.replace(/^\/*/,"/"),v=u.useMemo(()=>({basename:d,navigator:o,static:i,future:ha({v7_relativeSplatPath:!1},c)}),[d,c,o,i]);typeof s=="string"&&(s=Le(s));let{pathname:h="/",search:l="",hash:j="",state:f=null,key:g="default"}=s,p=u.useMemo(()=>{let E=Qe(h,d);return E==null?null:{location:{pathname:E,search:l,hash:j,state:f,key:g},navigationType:n}},[d,h,l,j,f,g,n]);return p==null?null:u.createElement(Ve.Provider,{value:v},u.createElement(Da.Provider,{children:r,value:p}))}new Promise(()=>{});function kr(a){let t={hasErrorBoundary:a.ErrorBoundary!=null||a.errorElement!=null};return a.Component&&Object.assign(t,{element:u.createElement(a.Component),Component:void 0}),a.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:u.createElement(a.HydrateFallback),HydrateFallback:void 0}),a.ErrorBoundary&&Object.assign(t,{errorElement:u.createElement(a.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ma(){return ma=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},ma.apply(this,arguments)}function Or(a,t){if(a==null)return{};var r={},s=Object.keys(a),n,o;for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(r[n]=a[n]);return r}function Ur(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function zr(a,t){return a.button===0&&(!t||t==="_self")&&!Ur(a)}const $r=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Br="6";try{window.__reactRouterVersion=Br}catch{}function Hr(a,t){return Qs({basename:t==null?void 0:t.basename,future:ma({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:Ns({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Vr(),routes:a,mapRouteProperties:kr,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function Vr(){var a;let t=(a=window)==null?void 0:a.__staticRouterHydrationData;return t&&t.errors&&(t=ma({},t,{errors:Gr(t.errors)})),t}function Gr(a){if(!a)return null;let t=Object.entries(a),r={};for(let[s,n]of t)if(n&&n.__type==="RouteErrorResponse")r[s]=new wa(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let o=window[n.__subType];if(typeof o=="function")try{let i=new o(n.message);i.stack="",r[s]=i}catch{}}if(r[s]==null){let o=new Error(n.message);o.stack="",r[s]=o}}else r[s]=n;return r}const Wr=u.createContext({isTransitioning:!1}),qr=u.createContext(new Map),Kr="startTransition",Pt=ms[Kr],Jr="flushSync",Lt=fs[Jr];function Xr(a){Pt?Pt(a):a()}function ia(a){Lt?Lt(a):a()}class Yr{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",t(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",r(s))}})}}function Qr(a){let{fallbackElement:t,router:r,future:s}=a,[n,o]=u.useState(r.state),[i,c]=u.useState(),[d,v]=u.useState({isTransitioning:!1}),[h,l]=u.useState(),[j,f]=u.useState(),[g,p]=u.useState(),E=u.useRef(new Map),{v7_startTransition:F}=s||{},w=u.useCallback(R=>{F?Xr(R):R()},[F]),_=u.useCallback((R,C)=>{let{deletedFetchers:N,flushSync:M,viewTransitionOpts:J}=C;R.fetchers.forEach((re,de)=>{re.data!==void 0&&E.current.set(de,re.data)}),N.forEach(re=>E.current.delete(re));let ae=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!J||ae){M?ia(()=>o(R)):w(()=>o(R));return}if(M){ia(()=>{j&&(h&&h.resolve(),j.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:J.currentLocation,nextLocation:J.nextLocation})});let re=r.window.document.startViewTransition(()=>{ia(()=>o(R))});re.finished.finally(()=>{ia(()=>{l(void 0),f(void 0),c(void 0),v({isTransitioning:!1})})}),ia(()=>f(re));return}j?(h&&h.resolve(),j.skipTransition(),p({state:R,currentLocation:J.currentLocation,nextLocation:J.nextLocation})):(c(R),v({isTransitioning:!0,flushSync:!1,currentLocation:J.currentLocation,nextLocation:J.nextLocation}))},[r.window,j,h,E,w]);u.useLayoutEffect(()=>r.subscribe(_),[r,_]),u.useEffect(()=>{d.isTransitioning&&!d.flushSync&&l(new Yr)},[d]),u.useEffect(()=>{if(h&&i&&r.window){let R=i,C=h.promise,N=r.window.document.startViewTransition(async()=>{w(()=>o(R)),await C});N.finished.finally(()=>{l(void 0),f(void 0),c(void 0),v({isTransitioning:!1})}),f(N)}},[w,i,h,r.window]),u.useEffect(()=>{h&&i&&n.location.key===i.location.key&&h.resolve()},[h,j,n.location,i]),u.useEffect(()=>{!d.isTransitioning&&g&&(c(g.state),v({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),p(void 0))},[d.isTransitioning,g]),u.useEffect(()=>{},[]);let B=u.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:R=>r.navigate(R),push:(R,C,N)=>r.navigate(R,{state:C,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(R,C,N)=>r.navigate(R,{replace:!0,state:C,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[r]),I=r.basename||"/",U=u.useMemo(()=>({router:r,navigator:B,static:!1,basename:I}),[r,B,I]),b=u.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return u.useEffect(()=>Ar(s,r.future),[s,r.future]),u.createElement(u.Fragment,null,u.createElement(Ra.Provider,{value:U},u.createElement(Ht.Provider,{value:n},u.createElement(qr.Provider,{value:E.current},u.createElement(Wr.Provider,{value:d},u.createElement(Ir,{basename:I,location:n.location,navigationType:n.historyAction,navigator:B,future:b},n.initialized||r.future.v7_partialHydration?u.createElement(Zr,{routes:r.routes,future:r.future,state:n}):t))))),null)}const Zr=u.memo(en);function en(a){let{routes:t,future:r,state:s}=a;return Nr(t,void 0,s,r)}const an=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=u.forwardRef(function(t,r){let{onClick:s,relative:n,reloadDocument:o,replace:i,state:c,target:d,to:v,preventScrollReset:h,viewTransition:l}=t,j=Or(t,$r),{basename:f}=u.useContext(Ve),g,p=!1;if(typeof v=="string"&&tn.test(v)&&(g=v,an))try{let _=new URL(window.location.href),B=v.startsWith("//")?new URL(_.protocol+v):new URL(v),I=Qe(B.pathname,f);B.origin===_.origin&&I!=null?v=I+B.search+B.hash:p=!0}catch{}let E=gr(v,{relative:n}),F=sn(v,{replace:i,state:c,target:d,preventScrollReset:h,relative:n,viewTransition:l});function w(_){s&&s(_),_.defaultPrevented||F(_)}return u.createElement("a",ma({},j,{href:g||E,onClick:p||o?s:w,ref:r,target:d}))});var Rt;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(Rt||(Rt={}));var Dt;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(Dt||(Dt={}));function sn(a,t){let{target:r,replace:s,state:n,preventScrollReset:o,relative:i,viewTransition:c}=t===void 0?{}:t,d=Ka(),v=Ze(),h=Wt(a,{relative:i});return u.useCallback(l=>{if(zr(l,r)){l.preventDefault();let j=s!==void 0?s:Be(v)===Be(h);d(a,{replace:j,state:n,preventScrollReset:o,relative:i,viewTransition:c})}},[v,d,h,s,n,r,a,o,i,c])}const Jt=u.createContext(void 0),ea=()=>{const a=u.useContext(Jt);if(a===void 0)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return a},rn=({children:a})=>{const[t,r]=u.useState(null),[s,n]=u.useState(!0),o=f=>new Date>=new Date(f),i=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("tokenExpiresAt"),r(null)};u.useEffect(()=>{(()=>{try{const p=localStorage.getItem("authToken"),E=localStorage.getItem("user"),F=localStorage.getItem("tokenExpiresAt");if(p&&E&&F)if(o(F))console.log("Token expirado, fazendo logout automático"),i();else{const w=JSON.parse(E);r(w)}}catch(p){console.error("Erro ao verificar status de autenticação:",p),i()}finally{n(!1)}})();const g=setInterval(()=>{const p=localStorage.getItem("tokenExpiresAt");p&&o(p)&&(console.log("Token expirou, fazendo logout automático"),i())},5*60*1e3);return()=>clearInterval(g)},[]);const j={user:t,isAuthenticated:!!t,login:(f,g,p)=>{r(f),localStorage.setItem("authToken",g),localStorage.setItem("user",JSON.stringify(f));const E=p||new Date(Date.now()+2*60*60*1e3);localStorage.setItem("tokenExpiresAt",E.toISOString())},logout:()=>{i()},updateUser:f=>{r(f),localStorage.setItem("user",JSON.stringify(f))},isLoading:s,hasPermission:f=>!t||!t.permissoes?!1:t.permissoes.includes(f),hasAnyPermission:f=>!t||!t.permissoes?!1:f.some(g=>t.permissoes.includes(g))};return e.jsx(Jt.Provider,{value:j,children:a})};const y=({name:a,size:t="medium",className:r="",style:s={}})=>{const n=()=>{if(typeof t=="number")return"";switch(t){case"small":return"material-icon--small";case"large":return"material-icon--large";default:return"material-icon--medium"}},o=()=>typeof t=="number"?{fontSize:`${t}px`,...s}:s;return e.jsx("span",{className:`material-icons material-icon ${n()} ${r}`,style:o(),children:a})};const nn=()=>{const[a,t]=u.useState(!1),{user:r,isAuthenticated:s,logout:n,hasPermission:o}=ea(),i=Ka(),c=Ze(),d=()=>{n(),t(!1),i("/login")},v=()=>{t(!a)},h=()=>{t(!1)},l=j=>c.pathname===j;return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header-container",children:[e.jsx("div",{className:"header-logo",children:e.jsx(_e,{to:"/cronograma",onClick:h,children:e.jsx("img",{src:"https://www.ubm.br/seminario-pesquisa/images/logo.png",alt:"Logo do Seminário UBM",className:"seminario-logo2"})})}),e.jsx("button",{className:`menu-toggle ${a?"active":""}`,onClick:v,"aria-label":"Menu",children:e.jsx(y,{name:"menu"})})]})}),e.jsx("nav",{className:`sidebar ${a?"open":""}`,children:e.jsxs("div",{className:"sidebar-content",children:[s&&r&&e.jsxs("div",{className:"user-greeting",children:[e.jsx(y,{name:"account_circle"}),e.jsxs("span",{children:["Olá, ",r.nome,"!"]})]}),e.jsxs("ul",{className:"nav-menu",children:[e.jsx("li",{children:e.jsxs(_e,{to:"/cronograma",className:l("/cronograma")?"active":"",onClick:h,children:[e.jsx(y,{name:"schedule"}),e.jsx("span",{children:"Cronograma"})]})}),s&&e.jsxs(e.Fragment,{children:[(o("EVENTOS_LISTAR")||o("EVENTOS_CRIAR")||o("EVENTOS_EDITAR")||o("EVENTOS_EXCLUIR"))&&e.jsx("li",{children:e.jsxs(_e,{to:"/eventos",className:l("/eventos")?"active":"",onClick:h,children:[e.jsx(y,{name:"event"}),e.jsx("span",{children:"Eventos"})]})}),(o("CURSOS_LISTAR")||o("CURSOS_CRIAR")||o("CURSOS_EDITAR")||o("CURSOS_EXCLUIR"))&&e.jsx("li",{children:e.jsxs(_e,{to:"/cursos",className:l("/cursos")?"active":"",onClick:h,children:[e.jsx(y,{name:"school"}),e.jsx("span",{children:"Cursos"})]})}),(o("LOCAIS_LISTAR")||o("LOCAIS_CRIAR")||o("LOCAIS_EDITAR")||o("LOCAIS_EXCLUIR"))&&e.jsx("li",{children:e.jsxs(_e,{to:"/locais",className:l("/locais")?"active":"",onClick:h,children:[e.jsx(y,{name:"place"}),e.jsx("span",{children:"Locais"})]})}),(o("USUARIOS_LISTAR")||o("USUARIOS_CRIAR")||o("USUARIOS_EDITAR")||o("USUARIOS_EXCLUIR"))&&e.jsx("li",{children:e.jsxs(_e,{to:"/usuarios",className:l("/usuarios")?"active":"",onClick:h,children:[e.jsx(y,{name:"people"}),e.jsx("span",{children:"Usuários"})]})}),(o("PERMISSOES_LISTAR")||o("PERFIS_LISTAR"))&&e.jsx("li",{children:e.jsxs(_e,{to:"/permissoes",className:l("/permissoes")?"active":"",onClick:h,children:[e.jsx(y,{name:"security"}),e.jsx("span",{children:"Permissões"})]})})]}),s?e.jsx("li",{className:"auth-item",children:e.jsxs("button",{onClick:d,className:"logout-btn",children:[e.jsx(y,{name:"logout"}),e.jsx("span",{children:"Sair"})]})}):e.jsx("li",{className:"auth-item",children:e.jsxs(_e,{to:"/login",className:l("/login")?"active":"",onClick:h,children:[e.jsx(y,{name:"login"}),e.jsx("span",{children:"Login"})]})})]})]})}),a&&e.jsx("div",{className:"sidebar-overlay",onClick:h})]})};const on=()=>e.jsx("footer",{className:"footer",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"footer-bottom",children:e.jsx("p",{children:"© 2025 Nova UBM - Todos os direitos reservados."})})})});function ln(){const t=Ze().pathname==="/login";return e.jsxs("div",{className:"app",children:[!t&&e.jsx(nn,{}),e.jsx("main",{className:t?"":"with-header",children:e.jsx(Mr,{})}),!t&&e.jsx(on,{})]})}const cn=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5000/api":"http://72.60.8.84:5000/api",Ja=cn();console.log("API Base URL configurada para:",Ja);console.log("Hostname atual:",window.location.hostname);const Ea=async(a,t={})=>{const r=localStorage.getItem("authToken"),s={"Content-Type":"application/json",...t.headers};return r&&(s.Authorization=`Bearer ${r}`),fetch(`${Ja}${a}`,{...t,headers:s})},te={async get(a){try{return await(await Ea(a)).json()}catch(t){return console.error("Erro na requisição GET:",t),{success:!1,message:"Erro de conexão com o servidor"}}},async post(a,t){try{return await(await Ea(a,{method:"POST",body:JSON.stringify(t)})).json()}catch(r){return console.error("Erro na requisição POST:",r),{success:!1,message:"Erro de conexão com o servidor"}}},async put(a,t){try{return await(await Ea(a,{method:"PUT",body:JSON.stringify(t)})).json()}catch(r){return console.error("Erro na requisição PUT:",r),{success:!1,message:"Erro de conexão com o servidor"}}},async delete(a){try{return await(await Ea(a,{method:"DELETE"})).json()}catch(t){return console.error("Erro na requisição DELETE:",t),{success:!1,message:"Erro de conexão com o servidor"}}}},dn={async login(a){try{return await(await fetch(`${Ja}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()}catch(t){return console.error("Erro no login:",t),{success:!1,message:"Erro de conexão com o servidor"}}},async logout(){return te.post("/auth/logout",{})},async verify(){return te.get("/auth/verify")}},fa={async listarEventos(a){try{const t=new URLSearchParams;a&&Object.entries(a).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n.toString())});const r=`/eventos${t.toString()?`?${t.toString()}`:""}`;return te.get(r)}catch(t){return console.error("Erro ao listar eventos:",t),{success:!1,message:"Erro de conexão com o servidor"}}},async buscarEventoPorId(a){return te.get(`/eventos/${a}`)},async criarEvento(a){return te.post("/eventos",a)},async atualizarEvento(a,t){return te.put(`/eventos/${a}`,t)},async deletarEvento(a){return te.delete(`/eventos/${a}`)},async obterEstatisticas(){return te.get("/eventos/estatisticas")},async obterCronograma(a){return te.get(`/eventos/cronograma?data=${a}`)}},Ye={async listarLocais(a){try{const t=new URLSearchParams;a&&Object.entries(a).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n.toString())});const r=`/locais${t.toString()?`?${t.toString()}`:""}`;return te.get(r)}catch(t){return console.error("Erro ao listar locais:",t),{success:!1,message:"Erro de conexão com o servidor"}}},async buscarLocalPorId(a){return te.get(`/locais/${a}`)},async gerarCodigo(a){return te.get(`/locais/gerar-codigo/${encodeURIComponent(a)}`)},async criarLocal(a){return te.post("/locais",a)},async atualizarLocal(a,t){return te.put(`/locais/${a}`,t)},async deletarLocal(a){return te.delete(`/locais/${a}`)},async obterEstatisticas(){return te.get("/locais/estatisticas")},async listarLocaisComEventos(){return te.get("/locais?comEventos=true")}},He={async listarCursos(a){try{const t=new URLSearchParams;a&&Object.entries(a).forEach(([s,n])=>{n!=null&&n!==""&&t.append(s,n.toString())});const r=`/cursos${t.toString()?`?${t.toString()}`:""}`;return te.get(r)}catch(t){return console.error("Erro ao listar cursos:",t),{success:!1,message:"Erro de conexão com o servidor"}}},async buscarCursoPorId(a){return te.get(`/cursos/${a}`)},async criarCurso(a){return te.post("/cursos",{nome:a.nome})},async atualizarCurso(a,t){return te.put(`/cursos/${a}`,t)},async deletarCurso(a){return te.delete(`/cursos/${a}`)}};const Se=({isOpen:a,onClose:t,title:r,children:s,size:n="medium",className:o=""})=>{if(!a)return null;const i=c=>{c.target===c.currentTarget&&t()};return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:`modal-content modal-${n} ${o}`,children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title",children:r}),e.jsx("button",{className:"modal-close-btn",onClick:t,"aria-label":"Fechar modal",children:e.jsx(y,{name:"close"})})]}),e.jsx("div",{className:"modal-body",children:s})]})})};const _t=()=>{const[a,t]=u.useState([]),[r,s]=u.useState([]),[n,o]=u.useState(!0),[i,c]=u.useState(""),[d,v]=u.useState(null),[h,l]=u.useState(!1),[j,f]=u.useState(""),[g,p]=u.useState({curso:"",data:"",tipoEvento:""});u.useEffect(()=>{E()},[]);const E=async()=>{try{o(!0),c("");const P=await He.listarCursos({limit:1e3});P.success&&P.data?s(P.data):(console.error("Erro ao carregar cursos:",P.message),s([]),c("Erro ao carregar cursos: "+(P.message||"Erro desconhecido")));const k=await fa.listarEventos({limit:1e3});if(k.success&&k.data){const H=k.data.map(T=>({...T,data:new Date(T.data),hora:new Date(T.hora)}));if(t(H),H.length>0&&!j){const T=H[0].data.toDateString();f(T)}}else console.error("Erro ao carregar eventos:",k.message),t([]),c("Erro ao carregar eventos: "+(k.message||"Erro desconhecido"))}catch(P){console.error("Erro ao carregar dados:",P),t([]),s([]),c("Erro de conexão com o servidor. Verifique se o backend está rodando.")}finally{o(!1)}},F=a.filter(P=>{const k=()=>{var T;return g.curso===""?!0:g.curso==="GERAL"?!P.curso:((T=P.curso)==null?void 0:T._id)===g.curso},H=()=>g.data!==""?P.data.toISOString().split("T")[0]===g.data:!0;return k()&&(g.tipoEvento===""||P.tipoEvento===g.tipoEvento)&&H()}),w=(P,k)=>{p(H=>({...H,[P]:k}))},_=()=>{p({curso:"",data:"",tipoEvento:""})},B=P=>P.toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"}),I=()=>{const P=a.map(k=>k.data.toDateString());return[...new Set(P)].sort((k,H)=>new Date(k).getTime()-new Date(H).getTime())},U=()=>F,b=P=>{const k=P??U(),H=new Set;return k.forEach(T=>{const Y=T.hora.getHours()*60+T.hora.getMinutes(),D=T.duracao||60,W=Y+D;for(let V=Y;V<=W;V+=30)if(V===W||V<W){const K=Math.floor(V/60),ee=V%60,me=`${K}:${ee.toString().padStart(2,"0")}`;H.add(me)}}),Array.from(H).sort((T,Y)=>{const[D,W]=T.split(":").map(Number),[V,K]=Y.split(":").map(Number);return D*60+W-(V*60+K)})},R=(P,k,H)=>(H??U()).find(Y=>{if(Y.data.toDateString()!==P)return!1;const[W,V]=k.split(":").map(Number),K=W*60+V,ee=Y.hora.getHours()*60+Y.hora.getMinutes(),me=Y.duracao||60,Me=ee+me;return me>=60?K>=ee&&K<=Me:K>=ee&&K<Me}),C=(P,k)=>P.hora.getHours()+":"+P.hora.getMinutes().toString().padStart(2,"0")===k,N=P=>{const H=(P.duracao||60)/30;return Math.ceil(H)},M=(P,k)=>{const H=P.hora.getHours()*60+P.hora.getMinutes(),T=P.duracao||60,Y=H+T,D=`${P.hora.getHours()}:${P.hora.getMinutes().toString().padStart(2,"0")}`,W=k.indexOf(D);let V=0;for(let K=W;K<k.length;K++){const[ee,me]=k[K].split(":").map(Number),Me=ee*60+me;if(T>=60)if(Me<=Y)V++;else break;else if(Me<Y)V++;else break}return V},J=(P,k,H)=>{let T=["evento-grade","evento-expandido",P.tipoEvento.toLowerCase().replace(/\s+/g,"-")];return H>=3&&T.push("card-compacto"),k>=4?T.push("card-longo"):k<=2&&T.push("card-curto"),T.join(" ")},ae=P=>{v(P),l(!0)},re=()=>{l(!1),v(null)},de=P=>{const k=I(),H=k.indexOf(j);P==="anterior"&&H>0?f(k[H-1]):P==="proximo"&&H<k.length-1&&f(k[H+1])},je=P=>new Date(P).toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),be=()=>{if(g.curso==="GERAL")return[{chave:"GERAIS",titulo:"Eventos Gerais",eventos:U().filter(T=>!T.curso)}];if(g.curso){const T=U().filter(W=>{var V;return((V=W.curso)==null?void 0:V._id)===g.curso}),Y=r.find(W=>W._id===g.curso),D=Y?`${Y.cod} - ${Y.nome}`:"Curso";return[{chave:g.curso,titulo:D,eventos:T}]}const P=new Map;U().forEach(T=>{if(T.curso&&typeof T.curso=="object"){const Y=T.curso,D=Y._id||`${Y.cod}-${Y.nome}`;P.has(D)||P.set(D,{chave:D,titulo:`${Y.cod} - ${Y.nome}`,eventos:[]}),P.get(D).eventos.push(T)}});const k=U().filter(T=>!T.curso);return k.length>0&&P.set("GERAIS",{chave:"GERAIS",titulo:"Eventos Gerais",eventos:k}),Array.from(P.values()).sort((T,Y)=>T.chave==="GERAIS"?1:Y.chave==="GERAIS"?-1:T.titulo.localeCompare(Y.titulo,"pt-BR"))};return n?e.jsx("div",{className:"cronograma",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Carregando cronograma..."})]})})}):i?e.jsx("div",{className:"cronograma",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"error-message",children:[e.jsx(y,{name:"error",size:"large"}),e.jsx("h3",{children:"Erro ao carregar dados"}),e.jsx("p",{children:i}),e.jsxs("button",{className:"btn btn-primary",onClick:E,children:[e.jsx(y,{name:"refresh",size:"small"}),"Tentar Novamente"]})]})})}):e.jsx("div",{className:"cronograma",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"cronograma-header",children:[e.jsx("h1",{children:"Cronograma do Seminário"}),e.jsx("p",{children:"Programação acadêmica organizada por curso e horário"})]}),e.jsxs("div",{className:"filtros-section",children:[e.jsxs("div",{className:"filtros-header",children:[e.jsx("h3",{children:"Filtros"}),e.jsxs("button",{className:"btn btn-secondary",onClick:_,children:[e.jsx(y,{name:"clear",size:"small",className:"material-icon--animated"}),"Limpar Filtros"]})]}),e.jsxs("div",{className:"filtros-grid",children:[e.jsxs("div",{className:"filtro-item",children:[e.jsx("label",{htmlFor:"filtro-curso",children:"Curso:"}),e.jsxs("select",{id:"filtro-curso",name:"curso",value:g.curso,onChange:P=>w("curso",P.target.value),autoComplete:"off",children:[e.jsx("option",{value:"GERAL",children:"Eventos Gerais"}),r.map(P=>e.jsxs("option",{value:P._id,children:[P.cod," - ",P.nome]},P._id))]})]}),e.jsxs("div",{className:"filtro-item",children:[e.jsx("label",{htmlFor:"filtro-tipoEvento",children:"Tipo de Evento:"}),e.jsxs("select",{id:"filtro-tipoEvento",name:"tipoEvento",value:g.tipoEvento,onChange:P=>w("tipoEvento",P.target.value),autoComplete:"off",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"Palestra Principal",children:"Palestra Principal"}),e.jsx("option",{value:"Apresentação de Trabalhos",children:"Apresentação de Trabalhos"}),e.jsx("option",{value:"Oficina",children:"Oficina"})]})]})]})]}),e.jsxs("div",{className:"visualizacao-controls",children:[e.jsx("div",{style:{flex:1}}),e.jsxs("div",{className:"resultados-count",children:[U().length," evento(s) encontrado(s)"]})]}),e.jsx("div",{className:"grade-cronograma",children:U().length===0?e.jsxs("div",{className:"no-results",children:[e.jsx(y,{name:"event_busy",size:"large"}),e.jsx("p",{children:"Nenhum evento encontrado."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mobile-day-navigation",children:e.jsxs("div",{className:"mobile-day-header",children:[e.jsx("button",{className:"btn-nav-day",onClick:()=>de("anterior"),disabled:I().indexOf(j)===0,children:e.jsx(y,{name:"chevron_left",size:"medium"})}),e.jsxs("div",{className:"mobile-day-info",children:[e.jsx("h3",{children:je(j)}),e.jsxs("span",{className:"mobile-day-counter",children:[I().indexOf(j)+1," de ",I().length]})]}),e.jsx("button",{className:"btn-nav-day",onClick:()=>de("proximo"),disabled:I().indexOf(j)===I().length-1,children:e.jsx(y,{name:"chevron_right",size:"medium"})})]})}),e.jsx("div",{className:"desktop-view",children:be().map(P=>e.jsxs("div",{style:{marginBottom:32},children:[e.jsxs("div",{className:"grade-info",children:[e.jsx("h4",{children:P.titulo}),e.jsxs("div",{className:"grade-stats",children:[P.eventos.length," evento(s) | ",b(P.eventos).length," horário(s)"]}),e.jsxs("div",{className:"grade-scroll-hint",children:[e.jsx(y,{name:"swipe",size:"small"}),e.jsx("span",{children:"Deslize horizontalmente para ver todos os dias"})]})]}),e.jsxs("div",{className:"grade-container",children:[e.jsxs("div",{className:"grade-header",children:[e.jsx("div",{className:"grade-cell grade-header-cell",children:"Horário"}),I().map(k=>e.jsx("div",{className:"grade-cell grade-header-cell",children:B(new Date(k))},`${P.chave}-${k}`))]}),b(P.eventos).map(k=>e.jsxs("div",{className:"grade-row",children:[e.jsx("div",{className:"grade-cell grade-time-cell",children:e.jsx("strong",{children:k})}),I().map(H=>{const T=R(H,k,P.eventos),Y=T&&C(T,k),D=b(P.eventos),W=T?N(T):0,V=T?M(T,D):0,K=I().length;return e.jsx("div",{className:"grade-cell grade-event-cell",children:T&&Y?e.jsxs("div",{className:J(T,W,K),onClick:()=>ae(T),role:"button",tabIndex:0,onKeyDown:ee=>{(ee.key==="Enter"||ee.key===" ")&&ae(T)},style:{height:`${V*120+(V-1)*2}px`,position:"absolute",top:0,left:0,right:0,zIndex:10,marginRight:"2px",marginBottom:"2px"},children:[e.jsxs("div",{className:"evento-grade-header",children:[e.jsx("span",{className:"evento-curso",children:T.curso?T.curso.cod:"GERAL"}),e.jsxs("span",{className:"evento-codigo",children:["#",T.cod]})]}),e.jsx("div",{className:"evento-grade-tema",title:T.tema,children:T.tema}),e.jsxs("div",{className:"evento-grade-info",children:[e.jsxs("div",{className:"evento-grade-local",title:T.sala,children:[e.jsx(y,{name:"location_on",size:"small"}),e.jsx("span",{children:T.sala})]}),(W>2||K<=2)&&e.jsxs("div",{className:"evento-grade-palestrante",title:T.palestrante||T.autores[0],children:[e.jsx(y,{name:"person",size:"small"}),e.jsx("span",{children:T.palestrante||T.autores[0]})]})]}),e.jsxs("div",{className:"evento-grade-duracao",children:[e.jsx(y,{name:"schedule",size:"small"}),e.jsxs("span",{children:[T.duracao||60," min"]})]}),e.jsx("div",{className:"evento-grade-tipo",children:T.tipoEvento})]}):T&&!Y?e.jsx("div",{className:"evento-ocupado"}):e.jsx("div",{className:"evento-vazio",children:"-"})},`${P.chave}-${H}-${k}`)})]},`${P.chave}-${k}`))]})]},P.chave))}),e.jsx("div",{className:"mobile-view",children:be().map(P=>{const k=P.eventos.filter(H=>H.data.toDateString()===j);return k.length===0?null:e.jsxs("div",{className:"mobile-grupo",children:[e.jsxs("div",{className:"mobile-grupo-header",children:[e.jsx("h4",{children:P.titulo}),e.jsxs("span",{className:"mobile-grupo-count",children:[k.length," evento(s)"]})]}),e.jsx("div",{className:"mobile-eventos-lista",children:k.sort((H,T)=>H.hora.getTime()-T.hora.getTime()).map(H=>e.jsxs("div",{className:`mobile-evento-card ${H.tipoEvento.toLowerCase().replace(/\s+/g,"-")}`,onClick:()=>ae(H),children:[e.jsxs("div",{className:"mobile-evento-header",children:[e.jsx("div",{className:"mobile-evento-hora",children:H.hora.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"mobile-evento-duracao",children:[H.duracao||60," min"]})]}),e.jsx("div",{className:"mobile-evento-titulo",children:H.tema}),e.jsxs("div",{className:"mobile-evento-info",children:[e.jsxs("div",{className:"mobile-evento-local",children:[e.jsx(y,{name:"location_on",size:"small"}),H.sala]}),e.jsx("div",{className:"mobile-evento-tipo",children:H.tipoEvento})]}),e.jsx("div",{className:"mobile-evento-badge",children:H.curso?H.curso.cod:"GERAL"})]},H._id))})]},P.chave)})})]})}),e.jsx(Se,{isOpen:h,onClose:re,title:"",size:"large",children:d&&e.jsxs("div",{className:"evento-detalhes-modal",children:[e.jsx("div",{className:"evento-hero",children:e.jsxs("div",{className:"evento-hero-background",children:[e.jsxs("div",{className:"evento-hero-content",children:[e.jsxs("div",{className:"evento-meta",children:[e.jsxs("span",{className:"evento-codigo-hero",children:["#",d.cod]}),e.jsx("span",{className:`evento-tipo-badge ${d.tipoEvento.toLowerCase().replace(/\s+/g,"-")}`,children:d.tipoEvento})]}),e.jsx("h2",{className:"evento-titulo-hero",children:d.tema}),e.jsx("div",{className:"evento-curso-hero",children:d.curso?e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"school",size:"small"}),e.jsx("span",{children:d.curso.nome})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"public",size:"small"}),e.jsx("span",{children:"Evento Geral"})]})})]}),e.jsxs("div",{className:"evento-hero-decoracao",children:[e.jsx("div",{className:"decoracao-circle"}),e.jsx("div",{className:"decoracao-lines"})]})]})}),e.jsxs("div",{className:"evento-content-area",children:[e.jsxs("div",{className:"evento-info-cards",children:[e.jsxs("div",{className:"info-card destaque",children:[e.jsx("div",{className:"info-card-icon",children:e.jsx(y,{name:"schedule",size:"large"})}),e.jsxs("div",{className:"info-card-content",children:[e.jsx("h3",{children:"Quando"}),e.jsx("p",{className:"data-completa",children:new Date(d.data).toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"})}),e.jsxs("div",{className:"horario-duracao",children:[e.jsx("span",{className:"horario",children:new Date(d.hora).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),e.jsx("span",{className:"separador",children:"•"}),e.jsxs("span",{className:"duracao",children:[d.duracao||60," minutos"]})]})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("div",{className:"info-card-icon",children:e.jsx(y,{name:"place",size:"large"})}),e.jsxs("div",{className:"info-card-content",children:[e.jsx("h3",{children:"Local"}),e.jsx("p",{className:"local-nome",children:d.sala}),e.jsx("p",{className:"local-instrucao",children:"Consulte a sinalização do campus"})]})]})]}),e.jsxs("div",{className:"evento-secao",children:[e.jsxs("div",{className:"secao-titulo",children:[e.jsx(y,{name:"people",size:"medium"}),e.jsx("h3",{children:"Participantes"})]}),e.jsx("div",{className:"participantes-grid",children:d.tipoEvento==="Palestra Principal"?e.jsxs("div",{className:"participante-destaque palestrante",children:[e.jsx("div",{className:"participante-avatar",children:e.jsx(y,{name:"mic",size:"large"})}),e.jsxs("div",{className:"participante-info",children:[e.jsx("span",{className:"participante-role",children:"Palestrante Principal"}),e.jsx("h4",{className:"participante-nome",children:d.palestrante}),e.jsxs("div",{className:"participante-badge especialista",children:[e.jsx(y,{name:"star",size:"small"}),"Especialista"]})]})]}):e.jsxs(e.Fragment,{children:[d.autores&&d.autores.length>0&&e.jsxs("div",{className:"participante-grupo",children:[e.jsxs("div",{className:"grupo-header",children:[e.jsx(y,{name:"group",size:"medium"}),e.jsx("span",{className:"grupo-titulo",children:d.autores.length===1?"Autor":"Autores"})]}),e.jsx("div",{className:"autores-lista",children:d.autores.map((P,k)=>e.jsxs("div",{className:"autor-item",children:[e.jsx("div",{className:"autor-avatar",children:e.jsx(y,{name:"person",size:"medium"})}),e.jsx("span",{className:"autor-nome",children:P})]},k))})]}),d.orientador&&e.jsxs("div",{className:"participante-destaque orientador",children:[e.jsx("div",{className:"participante-avatar",children:e.jsx(y,{name:"supervisor_account",size:"large"})}),e.jsxs("div",{className:"participante-info",children:[e.jsx("span",{className:"participante-role",children:"Orientador"}),e.jsx("h4",{className:"participante-nome",children:d.orientador}),e.jsxs("div",{className:"participante-badge professor",children:[e.jsx(y,{name:"school",size:"small"}),"Professor"]})]})]})]})})]}),d.resumo&&e.jsxs("div",{className:"evento-secao",children:[e.jsxs("div",{className:"secao-titulo",children:[e.jsx(y,{name:"description",size:"medium"}),e.jsx("h3",{children:"Resumo"})]}),e.jsx("div",{className:"resumo-container",children:e.jsx("div",{className:"resumo-texto",children:e.jsx("p",{children:d.resumo})})})]})]}),e.jsx("div",{className:"evento-footer",children:e.jsxs("div",{className:"footer-info",children:[e.jsx(y,{name:"info",size:"small"}),e.jsx("span",{children:"Para mais informações, consulte a coordenação do seminário"})]})})]})})]})})};const un=({evento:a,onSalvar:t,onCancelar:r})=>{const[s,n]=u.useState({data:"",hora:"",duracao:60,tema:"",autores:[""],palestrante:"",orientador:"",sala:"",tipoEvento:"Apresentação de Trabalhos",atrelarCurso:!0,curso:"",resumo:""}),[o,i]=u.useState([]),[c,d]=u.useState([]),[v,h]=u.useState(!1),[l,j]=u.useState(!0),[f,g]=u.useState(!1),[p,E]=u.useState({});u.useEffect(()=>{var C;if(a){const N=a.data?new Date(a.data).toISOString().split("T")[0]:"",M=a.hora?new Date(a.hora).toTimeString().slice(0,5):"";n({data:N,hora:M,duracao:a.duracao||60,tema:a.tema||"",autores:a.autores||[""],palestrante:a.palestrante||"",orientador:a.orientador||"",sala:a.sala||"",tipoEvento:a.tipoEvento||"Apresentação de Trabalhos",atrelarCurso:!!a.curso,curso:typeof a.curso=="string"?a.curso:((C=a.curso)==null?void 0:C._id)||"",resumo:a.resumo||""})}F(),w()},[a]);const F=async()=>{j(!0);try{const C=await Ye.listarLocais();C.success&&C.data&&i(C.data)}catch(C){console.error("Erro ao carregar locais:",C)}finally{j(!1)}},w=async()=>{g(!0);try{const C=await He.listarCursos({limit:1e3});C.success&&C.data&&d(C.data)}catch(C){console.error("Erro ao carregar cursos:",C)}finally{g(!1)}},_=C=>{const{name:N,value:M,type:J}=C.target,ae=C.target.checked;let re={...s,[N]:J==="checkbox"?ae:M};N==="atrelarCurso"&&!ae&&(re.curso=""),N==="tipoEvento"&&M==="Palestra Principal"&&(re.autores=[""],re.orientador=""),N==="tipoEvento"&&M==="Banner"&&(re.autores=[""],re.orientador="",re.palestrante=""),n(re),p[N]&&E(de=>({...de,[N]:""}))},B=(C,N)=>{const M=[...s.autores];M[C]=N,n({...s,autores:M}),p.autores&&E(J=>({...J,autores:""}))},I=()=>{n({...s,autores:[...s.autores,""]})},U=C=>{if(s.autores.length>1){const N=s.autores.filter((M,J)=>J!==C);n({...s,autores:N})}},b=()=>{const C={};return s.data||(C.data="Data é obrigatória"),s.hora||(C.hora="Hora é obrigatória"),s.tema.trim()||(C.tema="Tema é obrigatório"),s.sala||(C.sala="Local é obrigatório"),s.curso||(C.curso="Selecione um curso"),s.tipoEvento==="Palestra Principal"?s.palestrante.trim()||(C.palestrante="Palestrante é obrigatório para Palestra Principal"):s.tipoEvento==="Banner"||s.autores.filter(M=>M.trim()!=="").length===0&&(C.autores="Pelo menos um autor é obrigatório"),E(C),Object.keys(C).length===0},R=async C=>{if(C.preventDefault(),!!b()){h(!0);try{const[N,M,J]=s.data.split("-"),ae=Number(N),re=Number(M)-1,de=Number(J),[je,be]=s.hora.split(":"),P=Number(je),k=Number(be),H={...s,data:new Date(ae,re,de,0,0,0,0),hora:new Date(2e3,0,1,P,k,0,0),autores:s.autores.filter(Y=>Y.trim()!==""),curso:s.curso};let T;if(a!=null&&a._id?T=await fa.atualizarEvento(a._id,H):T=await fa.criarEvento(H),T.success&&T.data)t();else if(T.errors){const Y={};T.errors.forEach(D=>{D.path&&(Y[D.path]=D.msg)}),E(Y)}else alert(T.message||"Erro ao salvar evento")}catch(N){console.error("Erro ao salvar evento:",N),alert("Erro de conexão com o servidor")}finally{h(!1)}}};return e.jsxs("div",{className:"formulario-evento",children:[e.jsx("div",{className:"formulario-header",children:e.jsxs("h3",{children:[e.jsx(y,{name:a?"edit":"add",size:"medium"}),a?"Editar Evento":"Novo Evento"]})}),e.jsxs("form",{onSubmit:R,className:"formulario",children:[e.jsx("div",{className:"formulario-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tipoEvento",children:"Tipo de Evento *"}),e.jsxs("select",{id:"tipoEvento",name:"tipoEvento",value:s.tipoEvento,onChange:_,className:p.tipoEvento?"error":"",children:[e.jsx("option",{value:"Palestra Principal",children:"Palestra Principal"}),e.jsx("option",{value:"Apresentação de Trabalhos",children:"Apresentação de Trabalhos"}),e.jsx("option",{value:"Oficina",children:"Oficina"}),e.jsx("option",{value:"Banner",children:"Banner"})]}),p.tipoEvento&&e.jsx("span",{className:"error-message",children:p.tipoEvento})]})}),e.jsx("div",{className:"formulario-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"curso",children:"Curso *"}),e.jsxs("select",{id:"curso",name:"curso",value:s.curso,onChange:_,className:p.curso?"error":"",disabled:f,children:[e.jsx("option",{value:"",children:"Selecione um curso"}),c.map(C=>e.jsxs("option",{value:C._id,children:[C.nome," (",C.cod,")"]},C._id))]}),f&&e.jsx("span",{className:"loading-message",children:"Carregando cursos..."}),p.curso&&e.jsx("span",{className:"error-message",children:p.curso})]})}),e.jsxs("div",{className:"formulario-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"data",children:"Data *"}),e.jsx("input",{type:"date",id:"data",name:"data",value:s.data,onChange:_,className:p.data?"error":""}),p.data&&e.jsx("span",{className:"error-message",children:p.data})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"hora",children:"Hora *"}),e.jsx("input",{type:"time",id:"hora",name:"hora",value:s.hora,onChange:_,className:p.hora?"error":""}),p.hora&&e.jsx("span",{className:"error-message",children:p.hora})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"duracao",children:"Duração (minutos) *"}),e.jsxs("select",{id:"duracao",name:"duracao",value:s.duracao,onChange:_,className:p.duracao?"error":"",children:[e.jsx("option",{value:15,children:"15 minutos"}),e.jsx("option",{value:30,children:"30 minutos"}),e.jsx("option",{value:45,children:"45 minutos"}),e.jsx("option",{value:60,children:"1 hora (60 min)"}),e.jsx("option",{value:90,children:"1h 30min (90 min)"}),e.jsx("option",{value:120,children:"2 horas (120 min)"}),e.jsx("option",{value:150,children:"2h 30min (150 min)"}),e.jsx("option",{value:180,children:"3 horas (180 min)"})]}),p.duracao&&e.jsx("span",{className:"error-message",children:p.duracao})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"sala",children:"Local *"}),e.jsxs("select",{id:"sala",name:"sala",value:s.sala,onChange:_,className:p.sala?"error":"",disabled:l,children:[e.jsx("option",{value:"",children:"Selecione um local"}),o.map(C=>e.jsxs("option",{value:`${C.nome} (${C.cod})`,children:[C.nome," (",C.cod,") - Cap: ",C.capacidade]},C._id))]}),l&&e.jsx("span",{className:"loading-message",children:"Carregando locais..."}),p.sala&&e.jsx("span",{className:"error-message",children:p.sala})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tema",children:"Tema/Título *"}),e.jsx("input",{type:"text",id:"tema",name:"tema",value:s.tema,onChange:_,className:p.tema?"error":"",placeholder:"Título do evento ou apresentação"}),p.tema&&e.jsx("span",{className:"error-message",children:p.tema})]}),s.tipoEvento==="Palestra Principal"?e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"palestrante",children:"Palestrante *"}),e.jsx("input",{type:"text",id:"palestrante",name:"palestrante",value:s.palestrante,onChange:_,className:p.palestrante?"error":"",placeholder:"Nome do palestrante"}),p.palestrante&&e.jsx("span",{className:"error-message",children:p.palestrante})]}):s.tipoEvento==="Banner"?e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"banner-info",children:[e.jsx(y,{name:"info"}),e.jsx("p",{children:"Para eventos do tipo Banner, apenas o tema/título é obrigatório."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Autores *"}),e.jsxs("div",{className:"autores-container",children:[s.autores.map((C,N)=>e.jsxs("div",{className:"autor-input-group",children:[e.jsx("input",{type:"text",value:C,onChange:M=>B(N,M.target.value),placeholder:`Autor ${N+1}`,className:p.autores?"error":""}),s.autores.length>1&&e.jsx("button",{type:"button",onClick:()=>U(N),className:"btn-remover-autor",title:"Remover autor",children:e.jsx(y,{name:"remove",size:"small"})})]},N)),e.jsxs("button",{type:"button",onClick:I,className:"btn-adicionar-autor",children:[e.jsx(y,{name:"add",size:"small"}),"Adicionar Autor"]})]}),p.autores&&e.jsx("span",{className:"error-message",children:p.autores})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"orientador",children:"Orientador"}),e.jsx("input",{type:"text",id:"orientador",name:"orientador",value:s.orientador,onChange:_,placeholder:"Nome do orientador (opcional)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"resumo",children:"Resumo"}),e.jsx("textarea",{id:"resumo",name:"resumo",value:s.resumo,onChange:_,rows:4,placeholder:"Resumo opcional do evento (máximo 1000 caracteres)",maxLength:1e3}),e.jsxs("div",{className:"char-count",children:[s.resumo.length,"/1000 caracteres"]})]}),e.jsxs("div",{className:"formulario-actions",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:v,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"hourglass_empty",size:"small"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"save",size:"small"}),a?"Atualizar":"Salvar"," Evento"]})})]})]})]})};const hn=({onEditar:a,onAtualizar:t,atualizarLista:r,filtros:s})=>{const[n,o]=u.useState([]),[i,c]=u.useState(!0),[d,v]=u.useState(null),[h,l]=u.useState(!1),[j,f]=u.useState(!1),[g,p]=u.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10});u.useEffect(()=>{const N=setTimeout(()=>{E()},100);return()=>clearTimeout(N)},[r]),u.useEffect(()=>{const N=setTimeout(()=>{p(M=>({...M,currentPage:1})),E()},200);return()=>clearTimeout(N)},[s==null?void 0:s.busca,s==null?void 0:s.tipoEvento,s==null?void 0:s.data,s==null?void 0:s.local,s==null?void 0:s.curso,s==null?void 0:s.groupByCurso]),u.useEffect(()=>{g.currentPage>1&&E()},[g.currentPage]);const E=async()=>{if(!j){c(!0),f(!0);try{const N=g.currentPage,M=await fa.listarEventos({page:N,limit:s!=null&&s.groupByCurso?100:g.itemsPerPage,search:s==null?void 0:s.busca,tipoEvento:s==null?void 0:s.tipoEvento,data:s==null?void 0:s.data,local:s==null?void 0:s.local,curso:s==null?void 0:s.curso});M.success&&M.data&&(o(M.data),M.pagination&&p(J=>({...J,totalPages:M.pagination.totalPages,totalItems:M.pagination.totalItems})))}catch(N){console.error("Erro ao carregar eventos:",N)}finally{c(!1),f(!1)}}},F=async N=>{l(!0);try{const M=await fa.deletarEvento(N);M.success?(v(null),E(),t()):alert(M.message||"Erro ao excluir evento")}catch(M){console.error("Erro ao excluir evento:",M),alert("Erro de conexão com o servidor")}finally{l(!1)}},w=N=>{v(N)},_=()=>{v(null)},B=N=>new Date(N).toLocaleDateString("pt-BR"),I=N=>new Date(N).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),U=N=>{switch(N){case"Palestra Principal":return"campaign";case"Apresentação de Trabalhos":return"assignment";case"Oficina":return"build";case"Banner":return"flag";default:return"event"}},b=N=>{switch(N){case"Palestra Principal":return"palestra-principal";case"Apresentação de Trabalhos":return"apresentacao-trabalhos";case"Oficina":return"oficina";case"Banner":return"banner";default:return""}};if(i)return e.jsxs("div",{className:"lista-loading",children:[e.jsx(y,{name:"hourglass_empty",size:"large"}),e.jsx("p",{children:"Carregando eventos..."})]});if(n.length===0)return e.jsxs("div",{className:"lista-empty",children:[e.jsx(y,{name:"event_busy",size:"large"}),e.jsx("h3",{children:"Nenhum evento encontrado"}),e.jsx("p",{children:"Não há eventos cadastrados com os filtros aplicados."})]});const R=N=>{var M;return e.jsxs("div",{className:"evento-card",children:[e.jsxs("div",{className:"evento-header",children:[e.jsxs("div",{className:"evento-codigo",children:[e.jsx(y,{name:"tag",size:"small"}),N.cod]}),e.jsxs("div",{className:`evento-tipo ${b(N.tipoEvento)}`,children:[e.jsx(y,{name:U(N.tipoEvento),size:"small"}),N.tipoEvento]})]}),e.jsxs("div",{className:"evento-content",children:[e.jsx("h4",{className:"evento-tema",children:N.tema}),e.jsxs("div",{className:"evento-info",children:[N.tipoEvento==="Palestra Principal"?e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"person",size:"small"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Palestrante:"})," ",N.palestrante]})]}):N.tipoEvento==="Banner"?e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"info",size:"small"}),e.jsx("span",{style:{fontStyle:"italic",color:"#666"},children:"Evento do tipo Banner"})]}):e.jsxs(e.Fragment,{children:[N.autores&&N.autores.length>0&&e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"group",size:"small"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Autores:"})," ",(M=N.autores)==null?void 0:M.join(", ")]})]}),N.orientador&&e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"school",size:"small"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Orientador:"})," ",N.orientador]})]})]}),N.curso&&e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"school",size:"small"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Curso:"})," ",typeof N.curso=="object"?`${N.curso.nome} (${N.curso.cod})`:N.curso]})]}),!N.curso&&e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"public",size:"small"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Curso:"})," ",e.jsx("em",{style:{color:"var(--text-light)"},children:"Evento Geral"})]})]}),N.data&&e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"calendar_today",size:"small"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Data:"})," ",B(N.data)]})]}),N.hora&&e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"schedule",size:"small"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Hora:"})," ",I(N.hora)]})]}),N.sala&&e.jsxs("div",{className:"info-item",children:[e.jsx(y,{name:"place",size:"small"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Sala:"})," ",N.sala]})]})]}),N.resumo&&e.jsx("div",{className:"evento-resumo",children:e.jsx("p",{children:N.resumo})})]}),e.jsxs("div",{className:"evento-actions",children:[e.jsx("button",{onClick:()=>a(N),className:"btn-action btn-edit",title:"Editar evento",children:e.jsx(y,{name:"edit"})}),e.jsx("button",{onClick:()=>w(N),className:"btn-action btn-delete",title:"Excluir evento",children:e.jsx(y,{name:"delete"})})]})]},N._id)};let C=null;return s!=null&&s.groupByCurso&&n.length>0&&(C=n.reduce((N,M)=>{const J=M.curso&&typeof M.curso=="object"?`${M.curso.nome} (${M.curso.cod})`:M.curso?String(M.curso):"GERAIS";return N[J]||(N[J]=[]),N[J].push(M),N},{})),e.jsxs("div",{className:"lista-eventos",children:[e.jsxs("div",{className:"lista-header",children:[e.jsxs("h3",{children:[e.jsx(y,{name:"list"}),"Eventos Cadastrados"]}),e.jsxs("span",{className:"total-items",children:[g.totalItems," ",g.totalItems===1?"evento":"eventos"]})]}),s!=null&&s.groupByCurso&&C?Object.entries(C).map(([N,M])=>e.jsxs("div",{style:{marginBottom:32},children:[e.jsxs("div",{className:"lista-header",style:{marginTop:8},children:[e.jsxs("h3",{style:{fontSize:"1.1rem"},children:[e.jsx(y,{name:N==="GERAIS"?"public":"school"}),N==="GERAIS"?"Eventos Gerais":N]}),e.jsx("span",{className:"total-items",children:M.length})]}),e.jsx("div",{className:"eventos-grid",children:M.map(J=>R(J))})]},N)):e.jsx("div",{className:"eventos-grid",children:n.map(N=>R(N))}),!(s!=null&&s.groupByCurso)&&g.totalPages>1&&e.jsxs("div",{className:"paginacao",children:[e.jsxs("button",{onClick:()=>p(N=>({...N,currentPage:N.currentPage-1})),disabled:g.currentPage===1,className:"btn btn-secondary",children:[e.jsx(y,{name:"chevron_left",size:"small"}),"Anterior"]}),e.jsxs("span",{className:"pagination-info",children:["Página ",g.currentPage," de ",g.totalPages]}),e.jsxs("button",{onClick:()=>p(N=>({...N,currentPage:N.currentPage+1})),disabled:g.currentPage===g.totalPages,className:"btn btn-secondary",children:["Próxima",e.jsx(y,{name:"chevron_right",size:"small"})]})]}),e.jsx(Se,{isOpen:!!d,onClose:_,title:"Confirmar Exclusão",size:"small",children:e.jsxs("div",{style:{padding:"20px 0"},children:[e.jsxs("p",{style:{marginBottom:"20px",textAlign:"center"},children:["Deseja realmente excluir o evento ",e.jsx("strong",{children:d==null?void 0:d.tema}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:_,disabled:h,children:[e.jsx(y,{name:"close"})," Cancelar"]}),e.jsxs("button",{className:"btn btn-danger",onClick:()=>(d==null?void 0:d._id)&&F(d._id),disabled:h,children:[e.jsx(y,{name:"delete"})," ",h?"Excluindo...":"Excluir"]})]})]})})]})};const mn=({onFiltrar:a})=>{const[t,r]=u.useState(!1),[s,n]=u.useState({busca:"",tipoEvento:"",data:"",local:"",curso:""}),[o,i]=u.useState([]),[c,d]=u.useState([]),v=[{value:"",label:"Todos os tipos"},{value:"Palestra Principal",label:"Palestra Principal"},{value:"Apresentação de Trabalhos",label:"Apresentação de Trabalhos"},{value:"Oficina",label:"Oficina"},{value:"Banner",label:"Banner"}];u.useEffect(()=>{(async()=>{try{console.log("=== Iniciando carregamento de dados ===");const E=await He.listarCursos({limit:100});console.log("Response cursos:",E),E.success&&E.data&&i(E.data),console.log("Fazendo requisição para locais com eventos...");const F=await Ye.listarLocaisComEventos();console.log("Response locais com eventos:",F),F.success&&F.data?(console.log("Locais carregados:",F.data),d(F.data)):console.error("Erro ao carregar locais:",F.message),console.log("=== Finalizado carregamento de dados ===")}catch(E){console.error("Erro ao carregar dados:",E)}})()},[]),u.useEffect(()=>{console.log("FiltrosEvento: Enviando filtros iniciais com groupByCurso: true");const p=setTimeout(()=>{a({groupByCurso:!0})},100);return()=>clearTimeout(p)},[a]);const h=(p,E)=>{const F={...s,[p]:E};n(F);const w={busca:F.busca||void 0,tipoEvento:F.tipoEvento||void 0,data:F.data||void 0,local:F.local||void 0,curso:F.curso||void 0,groupByCurso:!0};console.log("FiltrosEvento: Enviando filtros processados:",w),a(w)},l=()=>{n({busca:"",tipoEvento:"",data:"",local:"",curso:""}),a({groupByCurso:!0})},j=()=>{const p=[];if(s.busca&&p.push({label:`Busca: "${s.busca}"`,campo:"busca"}),s.tipoEvento&&p.push({label:`Tipo: ${s.tipoEvento}`,campo:"tipoEvento"}),s.data&&p.push({label:`Data: ${new Date(s.data).toLocaleDateString("pt-BR")}`,campo:"data"}),s.local&&p.push({label:`Local: ${s.local}`,campo:"local"}),s.curso){const E=o.find(F=>F._id===s.curso);p.push({label:`Curso: ${(E==null?void 0:E.nome)||s.curso}`,campo:"curso"})}return p},f=p=>{h(p,"")},g=j();return e.jsxs("div",{className:"filtros-evento",children:[e.jsxs("div",{className:"filtros-header",children:[e.jsx("div",{className:"filtro-busca",children:e.jsxs("div",{className:"input-with-icon",children:[e.jsx(y,{name:"search"}),e.jsx("input",{type:"text",placeholder:"Buscar eventos por código, tema, autores ou palestrante...",value:s.busca,onChange:p=>h("busca",p.target.value),className:"busca-input"})]})}),e.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:e.jsxs("button",{onClick:()=>r(!t),className:`btn-expandir-filtros ${t?"expanded":""}`,children:[e.jsx(y,{name:"tune"}),"Filtros",e.jsx(y,{name:t?"expand_less":"expand_more"}),g.length>0&&e.jsx("span",{className:"filtros-contador",children:g.length})]})})]}),t&&e.jsxs("div",{className:"filtros-expandidos",children:[e.jsxs("div",{className:"filtros-row",children:[e.jsxs("div",{className:"filtro-group",children:[e.jsx("label",{children:"Tipo de Evento"}),e.jsx("select",{value:s.tipoEvento,onChange:p=>h("tipoEvento",p.target.value),children:v.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]}),e.jsxs("div",{className:"filtro-group",children:[e.jsx("label",{children:"Data do Evento"}),e.jsx("input",{type:"date",value:s.data,onChange:p=>h("data",p.target.value)})]}),e.jsxs("div",{className:"filtro-group",children:[e.jsx("label",{children:"Local"}),e.jsxs("select",{value:s.local,onChange:p=>h("local",p.target.value),children:[e.jsx("option",{value:"",children:"Todos os locais"}),c.length>0?c.map((p,E)=>e.jsx("option",{value:p,children:p},E)):e.jsx("option",{disabled:!0,children:"Nenhum local com eventos encontrado"})]})]}),e.jsxs("div",{className:"filtro-group",children:[e.jsx("label",{children:"Curso"}),e.jsxs("select",{value:s.curso,onChange:p=>h("curso",p.target.value),children:[e.jsx("option",{value:"",children:"Todos os cursos"}),o.map(p=>e.jsxs("option",{value:p._id,children:[p.nome," (",p.cod,")"]},p._id))]})]})]}),e.jsx("div",{className:"filtros-actions",children:e.jsxs("button",{onClick:l,className:"btn-limpar",children:[e.jsx(y,{name:"clear_all"}),"Limpar Filtros"]})})]}),g.length>0&&e.jsxs("div",{className:"filtros-ativos",children:[e.jsx("span",{className:"filtros-ativos-label",children:"Filtros ativos:"}),e.jsx("div",{className:"filtros-tags",children:g.map((p,E)=>e.jsxs("div",{className:"filtro-tag",children:[e.jsx("span",{children:p.label}),e.jsx("button",{onClick:()=>f(p.campo),className:"remover-filtro",children:e.jsx(y,{name:"close"})})]},E))})]})]})};const fn=()=>{const[a,t]=u.useState(!1),[r,s]=u.useState(null),[n,o]=u.useState({groupByCurso:!0}),[i,c]=u.useState(0);u.useEffect(()=>(a?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[a]);const d=()=>{s(null),t(!0)},v=g=>{s(g),t(!0)},h=()=>{t(!1),s(null),c(g=>g+1)},l=()=>{t(!1),s(null)},j=()=>{},f=g=>{console.log("Eventos: Recebendo novos filtros:",g),o(g)};return e.jsxs("div",{className:"eventos-page",children:[e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"page-title",children:[e.jsxs("h1",{children:[e.jsx(y,{name:"event"}),"Gerenciamento de Eventos"]}),e.jsx("p",{children:"Gerencie os eventos do seminário"})]})}),e.jsxs("div",{className:"page-content",children:[e.jsx("div",{className:"page-actions",children:e.jsxs("button",{onClick:d,className:"btn btn-primary",children:[e.jsx(y,{name:"add"}),"Novo Evento"]})}),e.jsx(mn,{onFiltrar:f}),e.jsx(hn,{filtros:n,onEditar:v,onAtualizar:j,atualizarLista:i})]})]}),e.jsx(Se,{isOpen:a,onClose:l,title:r?"Editar Evento":"Novo Evento",size:"large",children:e.jsx(un,{evento:r||void 0,onSalvar:h,onCancelar:l})})]})};function pn({localParaEditar:a,onSalvar:t,onCancelar:r}){const[s,n]=u.useState({nome:"",capacidade:"",descricao:"",tipoLocal:"Sala de Aula"}),[o,i]=u.useState(!1),[c,d]=u.useState({}),v=[{value:"Sala de Aula",label:"Sala de Aula",icon:"school"},{value:"Biblioteca",label:"Biblioteca",icon:"local_library"},{value:"Laboratório",label:"Laboratório",icon:"science"},{value:"Auditório",label:"Auditório",icon:"theater_comedy"},{value:"Anfiteatro",label:"Anfiteatro",icon:"event_seat"},{value:"Pátio",label:"Pátio",icon:"park"},{value:"Quadra",label:"Quadra",icon:"sports_soccer"},{value:"Espaço",label:"Espaço",icon:"landscape"}];u.useEffect(()=>{n(a?{nome:a.nome,capacidade:a.capacidade.toString(),descricao:a.descricao||"",tipoLocal:a.tipoLocal}:{nome:"",capacidade:"",descricao:"",tipoLocal:"Sala de Aula"}),d({})},[a]);const h=(f,g)=>{let p=g;f==="capacidade"&&(p=g.replace(/[^0-9]/g,"")),n(E=>({...E,[f]:p})),c[f]&&d(E=>({...E,[f]:""}))},l=()=>{const f={};if(s.nome.trim()?s.nome.length<2&&(f.nome="Nome deve ter pelo menos 2 caracteres"):f.nome="Nome é obrigatório",s.tipoLocal!=="Espaço")if(!s.capacidade)f.capacidade="Capacidade é obrigatória";else{const g=parseInt(s.capacidade);isNaN(g)||g<1?f.capacidade="Capacidade deve ser um número maior que 0":g>1e4&&(f.capacidade="Capacidade não pode ser maior que 10000")}else if(s.capacidade){const g=parseInt(s.capacidade);isNaN(g)||g<1?f.capacidade="Se informada, capacidade deve ser um número maior que 0":g>1e4&&(f.capacidade="Capacidade não pode ser maior que 10000")}return s.descricao&&s.descricao.length>500&&(f.descricao="Descrição não pode ter mais de 500 caracteres"),d(f),Object.keys(f).length===0},j=async f=>{if(f.preventDefault(),!!l()){i(!0);try{const g={nome:s.nome.trim(),capacidade:s.tipoLocal==="Espaço"&&!s.capacidade?999999:parseInt(s.capacidade),tipoLocal:s.tipoLocal,descricao:s.descricao.trim()||void 0},p=a?await Ye.atualizarLocal(a._id,g):await Ye.criarLocal(g);if(!(p!=null&&p.success)){const E=p==null?void 0:p.errors;if(E&&E.length){const F={};E.forEach(w=>{w.param&&(F[w.param]=w.msg||"Valor inválido")}),d(w=>({...w,...F,geral:p.message||"Falha na validação"}))}else d(F=>({...F,geral:(p==null?void 0:p.message)||"Erro ao salvar local"}));return}t()}catch(g){console.error("Erro ao salvar local:",g),d(p=>({...p,geral:"Erro ao salvar local. Tente novamente."}))}finally{i(!1)}}};return e.jsx("div",{className:"formulario-local",children:e.jsxs("form",{onSubmit:j,className:"formulario",children:[c.geral&&e.jsxs("div",{className:"error-message",children:[e.jsx(y,{name:"error"}),c.geral]}),e.jsx("div",{className:"formulario-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tipoLocal",children:"Tipo de Local *"}),e.jsx("select",{id:"tipoLocal",value:s.tipoLocal,onChange:f=>h("tipoLocal",f.target.value),className:c.tipoLocal?"error":"",children:v.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))}),c.tipoLocal&&e.jsxs("span",{className:"error-message",children:[e.jsx(y,{name:"error_outline"}),c.tipoLocal]})]})}),e.jsxs("div",{className:"formulario-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nome",children:"Nome do Local *"}),e.jsx("input",{type:"text",id:"nome",value:s.nome,onChange:f=>h("nome",f.target.value),placeholder:"Ex: Sala de Aula 101, Biblioteca Central",className:c.nome?"error":"",maxLength:100}),c.nome&&e.jsxs("span",{className:"error-message",children:[e.jsx(y,{name:"error_outline"}),c.nome]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"capacidade",children:["Capacidade ",s.tipoLocal==="Espaço"?"(Opcional)":"*"]}),e.jsx("input",{type:"number",id:"capacidade",value:s.capacidade,onChange:f=>h("capacidade",f.target.value),placeholder:s.tipoLocal==="Espaço"?"Deixe vazio para capacidade livre":"Ex: 40",className:c.capacidade?"error":"",min:"1",max:"10000"}),s.tipoLocal==="Espaço"&&e.jsx("small",{className:"form-hint",children:"Para espaços a céu aberto, deixe vazio para capacidade livre"}),c.capacidade&&e.jsxs("span",{className:"error-message",children:[e.jsx(y,{name:"error_outline"}),c.capacidade]})]})]}),e.jsx("div",{className:"formulario-row",children:e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"descricao",children:"Descrição"}),e.jsx("textarea",{id:"descricao",value:s.descricao,onChange:f=>h("descricao",f.target.value),placeholder:"Ex: Localizado no 2º andar do prédio principal, próximo à secretaria. Elevador disponível.",className:c.descricao?"error":"",maxLength:500,rows:3}),e.jsxs("small",{className:"form-hint",children:[s.descricao.length,"/500 caracteres - Informe como chegar ao local ou pontos de referência"]}),c.descricao&&e.jsxs("span",{className:"error-message",children:[e.jsx(y,{name:"error_outline"}),c.descricao]})]})}),e.jsxs("div",{className:"formulario-actions",children:[e.jsxs("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:o,children:[e.jsx(y,{name:"close"}),"Cancelar"]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"autorenew",className:"spinning"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"save"}),a?"Atualizar":"Salvar"]})})]})]})})}function vn({filtros:a,onEditar:t,atualizar:r,onAtualizarComplete:s}){const[n,o]=u.useState([]),[i,c]=u.useState(!0),[d,v]=u.useState(null),[h,l]=u.useState(1),[j,f]=u.useState(1),[g,p]=u.useState(null),[E,F]=u.useState(!1),w=12,_=async()=>{var C;try{c(!0);const N=await Ye.listarLocais({page:h,limit:w,search:a.busca,tipoLocal:a.tipo,capacidadeMin:a.capacidadeMin});o(N.data||[]),f(Math.ceil((((C=N.data)==null?void 0:C.length)||0)/w)),v(null)}catch(N){console.error("Erro ao carregar locais:",N),v("Erro ao carregar locais. Tente novamente.")}finally{c(!1)}};u.useEffect(()=>{_()},[h,a]),u.useEffect(()=>{r&&(_(),s())},[r]),u.useEffect(()=>{l(1)},[a]);const B=async C=>{F(!0);try{await Ye.deletarLocal(C),p(null),await _()}catch(N){console.error("Erro ao deletar local:",N),v("Erro ao deletar local. Tente novamente.")}finally{F(!1)}},I=C=>{p(C)},U=()=>{p(null)},b=C=>({"Sala de Aula":"school",Biblioteca:"local_library",Laboratório:"science",Auditório:"theater_comedy",Anfiteatro:"event_seat",Pátio:"park",Quadra:"sports_soccer",Espaço:"landscape"})[C]||"room",R=C=>({"Sala de Aula":"tipo-aula",Biblioteca:"tipo-biblioteca",Laboratório:"tipo-laboratorio",Auditório:"tipo-auditorio",Anfiteatro:"tipo-anfiteatro",Pátio:"tipo-patio",Quadra:"tipo-quadra",Espaço:"tipo-espaco"})[C]||"tipo-aula";return i?e.jsxs("div",{className:"lista-loading",children:[e.jsx(y,{name:"autorenew",className:"spinning"}),e.jsx("p",{children:"Carregando locais..."})]}):d?e.jsxs("div",{className:"lista-error",children:[e.jsx(y,{name:"error_outline"}),e.jsx("p",{children:d}),e.jsxs("button",{onClick:_,className:"btn btn-primary",children:[e.jsx(y,{name:"refresh"}),"Tentar Novamente"]})]}):e.jsxs("div",{className:"lista-local",children:[n.length===0?e.jsxs("div",{className:"lista-vazia",children:[e.jsx(y,{name:"location_on"}),e.jsx("h3",{children:"Nenhum local encontrado"}),e.jsx("p",{children:"Não há locais que correspondem aos filtros aplicados."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"local-grid",children:n.map(C=>e.jsxs("div",{className:"local-card",children:[e.jsxs("div",{className:"local-header",children:[e.jsxs("div",{className:"local-codigo",children:[e.jsx(y,{name:b(C.tipoLocal)}),e.jsx("span",{children:C.cod})]}),e.jsx("div",{className:`local-tipo ${R(C.tipoLocal)}`,children:C.tipoLocal})]}),e.jsxs("div",{className:"local-content",children:[e.jsx("h4",{className:"local-nome",children:C.nome}),C.descricao&&e.jsxs("div",{className:"local-descricao",children:[e.jsx(y,{name:"place"}),e.jsx("span",{children:C.descricao})]}),e.jsxs("div",{className:"local-capacidade",children:[e.jsx(y,{name:"people"}),e.jsx("span",{children:C.tipoLocal==="Espaço"&&C.capacidade>=999999?"Capacidade livre":`${C.capacidade} pessoas`})]})]}),e.jsxs("div",{className:"local-actions",children:[e.jsx("button",{onClick:()=>t(C),className:"btn-action btn-edit",title:"Editar local",children:e.jsx(y,{name:"edit"})}),e.jsx("button",{onClick:()=>I(C),className:"btn-action btn-delete",title:"Excluir local",children:e.jsx(y,{name:"delete"})})]})]},C._id))}),j>1&&e.jsxs("div",{className:"paginacao",children:[e.jsxs("button",{onClick:()=>l(C=>Math.max(1,C-1)),disabled:h===1,className:"btn-paginacao",children:[e.jsx(y,{name:"chevron_left"}),"Anterior"]}),e.jsx("div",{className:"paginacao-info",children:e.jsxs("span",{children:["Página ",h," de ",j]})}),e.jsxs("button",{onClick:()=>l(C=>Math.min(j,C+1)),disabled:h===j,className:"btn-paginacao",children:["Próxima",e.jsx(y,{name:"chevron_right"})]})]})]}),e.jsx(Se,{isOpen:!!g,onClose:U,title:"Confirmar Exclusão",size:"small",children:e.jsxs("div",{style:{padding:"20px 0"},children:[e.jsxs("p",{style:{marginBottom:"20px",textAlign:"center"},children:["Deseja realmente excluir o local ",e.jsx("strong",{children:g==null?void 0:g.nome}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:U,disabled:E,children:[e.jsx(y,{name:"close"})," Cancelar"]}),e.jsxs("button",{className:"btn btn-danger",onClick:()=>(g==null?void 0:g._id)&&B(g._id),disabled:E,children:[e.jsx(y,{name:"delete"})," ",E?"Excluindo...":"Excluir"]})]})]})})]})}function xn({onFiltroChange:a}){const[t,r]=u.useState(!1),[s,n]=u.useState({busca:"",tipo:"",capacidadeMin:"",capacidadeMax:""}),o=[{value:"",label:"Todos os tipos"},{value:"Sala de Aula",label:"Sala de Aula"},{value:"Biblioteca",label:"Biblioteca"},{value:"Laboratório",label:"Laboratório"},{value:"Auditório",label:"Auditório"},{value:"Anfiteatro",label:"Anfiteatro"},{value:"Pátio",label:"Pátio"},{value:"Quadra",label:"Quadra"},{value:"Espaço",label:"Espaço"}],i=(l,j)=>{const f={...s,[l]:j};n(f);const g={busca:f.busca||void 0,tipo:f.tipo||void 0,capacidadeMin:f.capacidadeMin?parseInt(f.capacidadeMin):void 0,capacidadeMax:f.capacidadeMax?parseInt(f.capacidadeMax):void 0};a(g)},c=()=>{n({busca:"",tipo:"",capacidadeMin:"",capacidadeMax:""}),a({})},d=()=>{const l=[];return s.busca&&l.push({label:`Busca: "${s.busca}"`,campo:"busca"}),s.tipo&&l.push({label:`Tipo: ${s.tipo}`,campo:"tipo"}),s.capacidadeMin&&l.push({label:`Min: ${s.capacidadeMin} pessoas`,campo:"capacidadeMin"}),s.capacidadeMax&&l.push({label:`Max: ${s.capacidadeMax} pessoas`,campo:"capacidadeMax"}),l},v=l=>{i(l,"")},h=d();return e.jsxs("div",{className:"filtros-local",children:[e.jsxs("div",{className:"filtros-header",children:[e.jsx("div",{className:"filtro-busca",children:e.jsxs("div",{className:"input-with-icon",children:[e.jsx(y,{name:"search"}),e.jsx("input",{type:"text",placeholder:"Buscar locais por código ou nome...",value:s.busca,onChange:l=>i("busca",l.target.value),className:"busca-input"})]})}),e.jsxs("button",{onClick:()=>r(!t),className:`btn-expandir-filtros ${t?"expanded":""}`,children:[e.jsx(y,{name:"tune"}),"Filtros",e.jsx(y,{name:t?"expand_less":"expand_more"}),h.length>0&&e.jsx("span",{className:"filtros-contador",children:h.length})]})]}),t&&e.jsxs("div",{className:"filtros-expandidos",children:[e.jsxs("div",{className:"filtros-row",children:[e.jsxs("div",{className:"filtro-group",children:[e.jsx("label",{children:"Tipo de Local"}),e.jsx("select",{value:s.tipo,onChange:l=>i("tipo",l.target.value),children:o.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{className:"filtro-group",children:[e.jsx("label",{children:"Capacidade Mínima"}),e.jsx("input",{type:"number",placeholder:"Ex: 20",value:s.capacidadeMin,onChange:l=>i("capacidadeMin",l.target.value),min:"1"})]}),e.jsxs("div",{className:"filtro-group",children:[e.jsx("label",{children:"Capacidade Máxima"}),e.jsx("input",{type:"number",placeholder:"Ex: 100",value:s.capacidadeMax,onChange:l=>i("capacidadeMax",l.target.value),min:"1"})]})]}),e.jsx("div",{className:"filtros-actions",children:e.jsxs("button",{onClick:c,className:"btn-limpar",children:[e.jsx(y,{name:"clear_all"}),"Limpar Filtros"]})})]}),h.length>0&&e.jsxs("div",{className:"filtros-ativos",children:[e.jsx("span",{className:"filtros-ativos-label",children:"Filtros ativos:"}),e.jsx("div",{className:"filtros-tags",children:h.map((l,j)=>e.jsxs("div",{className:"filtro-tag",children:[e.jsx("span",{children:l.label}),e.jsx("button",{onClick:()=>v(l.campo),className:"remover-filtro",children:e.jsx(y,{name:"close"})})]},j))})]})]})}const gn=()=>{const[a,t]=u.useState(!1),[r,s]=u.useState(null),[n,o]=u.useState(!1),[i,c]=u.useState({});u.useEffect(()=>(a?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[a]);const d=()=>{s(null),t(!0)},v=g=>{s(g),t(!0)},h=()=>{t(!1),s(null),o(!0)},l=()=>{t(!1),s(null)},j=()=>{o(!1)},f=g=>{c(g)};return e.jsxs("div",{className:"locais-page",children:[e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"page-title",children:[e.jsxs("h1",{children:[e.jsx(y,{name:"location_on"}),"Gerenciamento de Locais"]}),e.jsx("p",{children:"Gerencie os espaços e locais do seminário"})]})}),e.jsxs("div",{className:"page-content",children:[e.jsx("div",{className:"page-actions",children:e.jsxs("button",{onClick:d,className:"btn btn-primary",children:[e.jsx(y,{name:"add"}),"Novo Local"]})}),e.jsx(xn,{onFiltroChange:f}),e.jsx(vn,{filtros:i,onEditar:v,atualizar:n,onAtualizarComplete:j})]})]}),e.jsx(Se,{isOpen:a,onClose:l,title:r?"Editar Local":"Novo Local",size:"large",children:e.jsx(pn,{localParaEditar:r,onSalvar:h,onCancelar:l})})]})};function jn({cursoParaEditar:a,onSalvo:t,onCancelar:r}){const[s,n]=u.useState({cod:"",nome:""}),[o,i]=u.useState({}),[c,d]=u.useState(!1);u.useEffect(()=>{n(a?{cod:a.cod,nome:a.nome}:{cod:"",nome:""})},[a]);const v=()=>{const j={};return s.nome.trim()||(j.nome="Nome é obrigatório"),(s.nome.trim().length<2||s.nome.trim().length>100)&&(j.nome="Nome deve ter entre 2 e 100 caracteres"),i(j),Object.keys(j).length===0},h=j=>{const{name:f,value:g}=j.target;n(p=>({...p,[f]:g}))},l=async j=>{if(j.preventDefault(),!!v()){d(!0);try{if(a&&a._id){const f=await He.atualizarCurso(a._id,s);if(!f.success)throw new Error(f.message||"Falha ao atualizar")}else{const f=await He.criarCurso({nome:s.nome});if(!f.success)throw new Error(f.message||"Falha ao criar")}t==null||t()}catch(f){const g=(f==null?void 0:f.message)||"Erro ao salvar curso";alert(g)}finally{d(!1)}}};return e.jsxs("div",{className:"form-curso-card",children:[e.jsxs("div",{className:"form-curso-header",children:[e.jsx(y,{name:"school",className:"material-icon--primary"}),e.jsx("h3",{children:a?"Editar Curso":"Novo Curso"})]}),e.jsxs("form",{onSubmit:l,className:"form-curso-grid",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"nome",children:"Nome do curso"}),e.jsx("input",{id:"nome",name:"nome",value:s.nome,onChange:h,placeholder:"Ex.: Sistemas de Informação",maxLength:100}),o.nome&&e.jsx("span",{className:"error-text",children:o.nome})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:r,disabled:c,children:[e.jsx(y,{name:"close"})," Cancelar"]}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:c,children:[e.jsx(y,{name:"save"})," ",c?"Salvando...":"Salvar"]})]})]})]})}function bn({filtros:a,atualizarLista:t,onEdit:r}){const[s,n]=u.useState([]),[o,i]=u.useState(!1),[c,d]=u.useState(null),[v,h]=u.useState(1),[l]=u.useState(12),[j,f]=u.useState(null),[g,p]=u.useState(null),[E,F]=u.useState(!1),w=async()=>{i(!0),d(null);try{const U=await He.listarCursos({page:v,limit:l,search:a==null?void 0:a.busca,status:a==null?void 0:a.status,modalidade:a==null?void 0:a.modalidade});if(!U.success)throw new Error(U.message||"Falha ao carregar cursos");n(U.data||[]),f(U.pagination||null)}catch(U){d((U==null?void 0:U.message)||"Erro ao carregar cursos")}finally{i(!1)}};u.useEffect(()=>{h(1)},[a==null?void 0:a.busca,a==null?void 0:a.status,a==null?void 0:a.modalidade]),u.useEffect(()=>{w()},[v,l,t,a==null?void 0:a.busca,a==null?void 0:a.status,a==null?void 0:a.modalidade]);const _=async U=>{F(!0);try{const b=await He.deletarCurso(U);if(!b.success){alert(b.message||"Falha ao excluir");return}p(null),w()}catch{alert("Erro ao excluir curso")}finally{F(!1)}},B=U=>{p(U)},I=()=>{p(null)};return o?e.jsx("div",{className:"lista-curso-loader",children:"Carregando cursos..."}):c?e.jsx("div",{className:"lista-curso-erro",children:c}):e.jsxs("div",{className:"lista-curso-wrapper",children:[s.length===0?e.jsxs("div",{className:"lista-curso-vazio",children:[e.jsx(y,{name:"inbox"})," Nenhum curso encontrado"]}):e.jsx("div",{className:"grid-cursos",children:s.map(U=>e.jsxs("div",{className:"curso-card",children:[e.jsxs("div",{className:"curso-card-header",children:[e.jsx("div",{className:"curso-avatar",children:U.cod?U.cod.substring(0,2):"XX"}),e.jsxs("div",{className:"curso-titles",children:[e.jsx("h4",{title:U.nome,children:U.nome||"Nome não definido"}),e.jsx("span",{className:"curso-cod",children:U.cod||"Código não definido"})]})]}),e.jsxs("div",{className:"curso-actions",children:[e.jsx("button",{onClick:()=>r==null?void 0:r(U),className:"btn-action btn-edit",title:"Editar curso",children:e.jsx(y,{name:"edit"})}),U._id&&e.jsx("button",{onClick:()=>B(U),className:"btn-action btn-delete",title:"Excluir curso",children:e.jsx(y,{name:"delete"})})]})]},U._id||U.cod))}),j&&j.totalPages>1&&e.jsxs("div",{className:"paginacao",children:[e.jsxs("button",{className:"btn",disabled:v<=1,onClick:()=>h(U=>Math.max(1,U-1)),children:[e.jsx(y,{name:"chevron_left"})," Anterior"]}),e.jsxs("span",{children:["Página ",j.currentPage," de ",j.totalPages]}),e.jsxs("button",{className:"btn",disabled:v>=j.totalPages,onClick:()=>h(U=>U+1),children:["Próxima ",e.jsx(y,{name:"chevron_right"})]})]}),e.jsx(Se,{isOpen:!!g,onClose:I,title:"Confirmar Exclusão",size:"small",children:e.jsxs("div",{style:{padding:"20px 0"},children:[e.jsxs("p",{style:{marginBottom:"20px",textAlign:"center"},children:["Deseja realmente excluir o curso ",e.jsx("strong",{children:g==null?void 0:g.nome}),"?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:I,disabled:E,children:[e.jsx(y,{name:"close"})," Cancelar"]}),e.jsxs("button",{className:"btn btn-danger",onClick:()=>(g==null?void 0:g._id)&&_(g._id),disabled:E,children:[e.jsx(y,{name:"delete"})," ",E?"Excluindo...":"Excluir"]})]})]})})]})}function yn({onChange:a}){const[t,r]=u.useState(!1),[s,n]=u.useState({busca:"",status:""}),o=[{value:"",label:"Todos os status"},{value:"Ativo",label:"Ativo"},{value:"Inativo",label:"Inativo"},{value:"Em planejamento",label:"Em planejamento"}],i=(l,j)=>{const f={...s,[l]:j};n(f);const g={busca:f.busca||void 0,status:f.status||void 0};a==null||a(g)},c=()=>{n({busca:"",status:""}),a==null||a({})},d=()=>{const l=[];return s.busca&&l.push({label:`Busca: "${s.busca}"`,campo:"busca"}),s.status&&l.push({label:`Status: ${s.status}`,campo:"status"}),l},v=l=>{i(l,"")},h=d();return e.jsxs("div",{className:"filtros-curso",children:[e.jsxs("div",{className:"filtros-header",children:[e.jsx("div",{className:"filtro-busca",children:e.jsxs("div",{className:"input-with-icon",children:[e.jsx(y,{name:"search"}),e.jsx("input",{type:"text",placeholder:"Buscar cursos por código ou nome...",value:s.busca,onChange:l=>i("busca",l.target.value),className:"busca-input"})]})}),e.jsxs("button",{onClick:()=>r(!t),className:`btn-expandir-filtros ${t?"expanded":""}`,children:[e.jsx(y,{name:"tune"}),"Filtros",e.jsx(y,{name:t?"expand_less":"expand_more"}),h.length>0&&e.jsx("span",{className:"filtros-contador",children:h.length})]})]}),t&&e.jsxs("div",{className:"filtros-expandidos",children:[e.jsx("div",{className:"filtros-row",children:e.jsxs("div",{className:"filtro-group",children:[e.jsx("label",{children:"Status do Curso"}),e.jsx("select",{value:s.status,onChange:l=>i("status",l.target.value),children:o.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]})}),e.jsx("div",{className:"filtros-actions",children:e.jsxs("button",{onClick:c,className:"btn-limpar",children:[e.jsx(y,{name:"clear_all"}),"Limpar Filtros"]})})]}),h.length>0&&e.jsxs("div",{className:"filtros-ativos",children:[e.jsx("span",{className:"filtros-ativos-label",children:"Filtros ativos:"}),e.jsx("div",{className:"filtros-tags",children:h.map((l,j)=>e.jsxs("div",{className:"filtro-tag",children:[e.jsx("span",{children:l.label}),e.jsx("button",{onClick:()=>v(l.campo),className:"remover-filtro",children:e.jsx(y,{name:"close"})})]},j))})]})]})}const Nn=()=>{const[a,t]=u.useState(!1),[r,s]=u.useState(null),[n,o]=u.useState(!1),[i,c]=u.useState({}),d=()=>{s(null),t(!0)},v=l=>{s(l),t(!0)},h=()=>{t(!1),s(null),o(l=>!l)};return e.jsx("div",{className:"cursos-page",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"page-title",children:[e.jsxs("h1",{children:[e.jsx(y,{name:"school"}),"Gerenciamento de Cursos"]}),e.jsx("p",{children:"Gerencie os cursos participantes do seminário"})]})}),e.jsxs("div",{className:"page-actions",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("div",{}),e.jsxs("button",{className:"btn btn-primary",onClick:d,children:[e.jsx(y,{name:"add"})," Novo Curso"]})]}),e.jsxs("div",{className:"page-content",style:{display:"grid",gap:12},children:[e.jsx(yn,{onChange:c}),e.jsx(bn,{filtros:i,atualizarLista:n,onEdit:v})]}),e.jsx(Se,{isOpen:a,onClose:()=>t(!1),title:r?"Editar Curso":"Novo Curso",size:"medium",children:e.jsx(jn,{cursoParaEditar:r,onSalvo:h,onCancelar:()=>t(!1)})})]})})};const En=({usuarioParaEditar:a,onSalvar:t,onCancelar:r,onSucesso:s,onErro:n})=>{const{user:o,updateUser:i}=ea(),[c,d]=u.useState({nome:"",email:"",senha:"",confirmaSenha:"",perfil:"",ativo:!0}),[v,h]=u.useState([]),[l,j]=u.useState(!1),[f,g]=u.useState({}),[p,E]=u.useState(!1),[F,w]=u.useState(!1),_=!!a;u.useEffect(()=>{B(),a&&d({nome:a.nome,email:a.email,senha:"",confirmaSenha:"",perfil:typeof a.perfil=="string"?a.perfil:a.perfil._id||"",ativo:a.ativo})},[a]);const B=async()=>{try{const R=await te.get("/perfis");R.success&&Array.isArray(R.data)&&h(R.data.filter(C=>C.ativo))}catch(R){console.error("Erro ao carregar dados:",R)}},I=()=>{const R={};return c.nome.trim()?c.nome.trim().length<2&&(R.nome="Nome deve ter pelo menos 2 caracteres"):R.nome="Nome é obrigatório",c.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)||(R.email="Email inválido"):R.email="Email é obrigatório",_?c.senha&&c.senha.length<6&&(R.senha="Senha deve ter pelo menos 6 caracteres"):c.senha?c.senha.length<6&&(R.senha="Senha deve ter pelo menos 6 caracteres"):R.senha="Senha é obrigatória",c.senha&&c.senha!==c.confirmaSenha&&(R.confirmaSenha="Senhas não coincidem"),c.perfil||(R.perfil="Perfil é obrigatório"),g(R),Object.keys(R).length===0},U=async R=>{var C,N,M,J;if(R.preventDefault(),!!I()){j(!0),g({});try{const ae=_?`/usuarios/${a._id}`:"/usuarios",re=_?"put":"post",de={nome:c.nome.trim(),email:c.email.trim(),perfil:c.perfil};_||(c.senha&&(de.senha=c.senha),de.ativo=!0);const je=await te[re](ae,de);if(je.success){if(_&&c.senha)try{await te.put(`/usuarios/${a._id}/senha`,{novaSenha:c.senha})}catch(k){console.error("Erro ao atualizar senha:",k),n&&n("Erro ao Atualizar Senha","Dados básicos salvos, mas houve erro ao atualizar a senha");return}const be=_?"Usuário Atualizado!":"Usuário Criado!",P=je.message||(_?"Usuário atualizado com sucesso!":"Usuário criado com sucesso!");if(_&&o&&a&&o.id===a._id){const k={...o,nome:c.nome,email:c.email};i(k)}s&&s(be,P),t()}}catch(ae){if(console.error("Erro ao salvar usuário:",ae),(N=(C=ae.response)==null?void 0:C.data)!=null&&N.errors)g(ae.response.data.errors);else{const re=((J=(M=ae.response)==null?void 0:M.data)==null?void 0:J.message)||"Erro ao salvar usuário";n&&n("Erro ao Salvar",re)}}finally{j(!1)}}},b=(R,C)=>{d(N=>({...N,[R]:C})),f[R]&&g(N=>{const{[R]:M,...J}=N;return J})};return e.jsxs("form",{onSubmit:U,className:"formulario-usuario",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"nome",className:"required",children:[e.jsx(y,{name:"person"}),"Nome"]}),e.jsx("input",{type:"text",id:"nome",value:c.nome,onChange:R=>b("nome",R.target.value),className:f.nome?"error":"",placeholder:"Digite o nome completo",disabled:l}),f.nome&&e.jsx("span",{className:"error-message",children:f.nome})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"email",className:"required",children:[e.jsx(y,{name:"email"}),"Email"]}),e.jsx("input",{type:"email",id:"email",value:c.email,onChange:R=>b("email",R.target.value),className:f.email?"error":"",placeholder:"Digite o email",disabled:l}),f.email&&e.jsx("span",{className:"error-message",children:f.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"senha",className:_?"":"required",children:[e.jsx(y,{name:"lock"}),_?"Nova Senha (opcional)":"Senha"]}),e.jsxs("div",{className:"password-input",children:[e.jsx("input",{type:p?"text":"password",id:"senha",value:c.senha,onChange:R=>b("senha",R.target.value),className:f.senha?"error":"",placeholder:_?"Deixe vazio para manter a atual":"Digite a senha",disabled:l,minLength:6}),e.jsx("button",{type:"button",onClick:()=>E(!p),className:"password-toggle",title:p?"Ocultar senha":"Mostrar senha",children:e.jsx(y,{name:p?"visibility_off":"visibility"})})]}),f.senha&&e.jsx("span",{className:"error-message",children:f.senha})]}),c.senha&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"confirmaSenha",className:"required",children:[e.jsx(y,{name:"lock_outline"}),"Confirmar Senha"]}),e.jsxs("div",{className:"password-input",children:[e.jsx("input",{type:F?"text":"password",id:"confirmaSenha",value:c.confirmaSenha,onChange:R=>b("confirmaSenha",R.target.value),className:f.confirmaSenha?"error":"",placeholder:"Confirme a senha",disabled:l}),e.jsx("button",{type:"button",onClick:()=>w(!F),className:"password-toggle",title:F?"Ocultar senha":"Mostrar senha",children:e.jsx(y,{name:F?"visibility_off":"visibility"})})]}),f.confirmaSenha&&e.jsx("span",{className:"error-message",children:f.confirmaSenha})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"perfil",className:"required",children:[e.jsx(y,{name:"account_circle"}),"Perfil"]}),e.jsxs("select",{id:"perfil",value:c.perfil,onChange:R=>b("perfil",R.target.value),className:f.perfil?"error":"",disabled:l,children:[e.jsx("option",{value:"",children:"Selecione um perfil"}),v.map(R=>e.jsx("option",{value:R._id,children:R.nome},R._id))]}),f.perfil&&e.jsx("span",{className:"error-message",children:f.perfil})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:l,children:[e.jsx(y,{name:"close"}),"Cancelar"]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"hourglass_empty"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"save"}),_?"Salvar Alterações":"Criar Usuário"]})})]})]})};const Sn=({filtros:a,onEditar:t,atualizar:r,onAtualizarComplete:s})=>{const{hasPermission:n,user:o}=ea(),[i,c]=u.useState([]),[d,v]=u.useState(!0),[h,l]=u.useState(null),j=n("USUARIOS_EDITAR"),f=n("USUARIOS_EXCLUIR");u.useEffect(()=>{g()},[a,r]),u.useEffect(()=>{r&&s()},[r,s]);const g=async()=>{try{v(!0),l(null);const w=await te.get("/usuarios");if(w.success&&Array.isArray(w.data)){let _=w.data;if(a.busca){const B=a.busca.toLowerCase();_=_.filter(I=>I.nome.toLowerCase().includes(B)||I.email.toLowerCase().includes(B))}if(a.perfil&&(_=_.filter(B=>(typeof B.perfil=="string"?B.perfil:B.perfil._id)===a.perfil)),a.status){const B=a.status==="ativo";_=_.filter(I=>I.ativo===B)}if(a.curso){const B=a.curso.toLowerCase();_=_.filter(I=>{var U;return(U=I.curso)==null?void 0:U.toLowerCase().includes(B)})}_.sort((B,I)=>B.nome.localeCompare(I.nome)),c(_)}else c([])}catch(w){console.error("Erro ao carregar usuários:",w),l("Erro ao carregar usuários. Tente novamente."),c([])}finally{v(!1)}},p=async w=>{var I,U;if(!f)return;const _=w.ativo?"desativar":"ativar",B=`Tem certeza que deseja ${_} o usuário ${w.nome}?`;if(window.confirm(B))try{const b=await te.delete(`/usuarios/${w._id}`);b.success&&(alert(b.message||`Usuário ${_==="desativar"?"desativado":"ativado"} com sucesso`),g())}catch(b){console.error("Erro ao alterar status do usuário:",b);const R=((U=(I=b.response)==null?void 0:I.data)==null?void 0:U.message)||`Erro ao ${_} usuário`;alert(R)}},E=w=>w?new Date(w).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Nunca",F=w=>typeof w=="string"?"Carregando...":w.nome;return d?e.jsxs("div",{className:"lista-usuario-loading",children:[e.jsx(y,{name:"hourglass_empty"}),e.jsx("span",{children:"Carregando usuários..."})]}):h?e.jsxs("div",{className:"lista-usuario-error",children:[e.jsx(y,{name:"error_outline"}),e.jsx("span",{children:h}),e.jsxs("button",{onClick:g,className:"btn btn-primary",children:[e.jsx(y,{name:"refresh"}),"Tentar novamente"]})]}):i.length===0?e.jsxs("div",{className:"lista-usuario-empty",children:[e.jsx(y,{name:"person_outline"}),e.jsx("h3",{children:"Nenhum usuário encontrado"}),e.jsx("p",{children:Object.values(a).some(Boolean)?"Tente ajustar os filtros para encontrar usuários.":"Não há usuários cadastrados no sistema."})]}):e.jsxs("div",{className:"lista-usuario",children:[e.jsx("div",{className:"lista-header",children:e.jsxs("h3",{children:[e.jsx(y,{name:"people"}),i.length," usuário(s) encontrado(s)"]})}),e.jsx("div",{className:"usuarios-grid",children:i.map(w=>e.jsxs("div",{className:`usuario-card ${w.ativo?"":"inativo"}`,children:[e.jsxs("div",{className:"usuario-header",children:[e.jsx("div",{className:"usuario-avatar",children:e.jsx(y,{name:"person"})}),e.jsxs("div",{className:"usuario-info",children:[e.jsx("h4",{children:w.nome}),e.jsx("p",{className:"usuario-email",children:w.email})]}),e.jsxs("div",{className:`usuario-status ${w.ativo?"ativo":"inativo"}`,children:[e.jsx(y,{name:w.ativo?"check_circle":"cancel"}),e.jsx("span",{children:w.ativo?"Ativo":"Inativo"})]})]}),e.jsxs("div",{className:"usuario-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx(y,{name:"account_circle"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Perfil:"})," ",F(w.perfil)]})]}),w.curso&&e.jsxs("div",{className:"detail-item",children:[e.jsx(y,{name:"school"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Curso:"})," ",w.curso]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx(y,{name:"schedule"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Último login:"})," ",E(w.ultimoLogin)]})]})]}),e.jsxs("div",{className:"usuario-actions",children:[j&&e.jsxs("button",{onClick:()=>t(w),className:"btn btn-outline",title:"Editar usuário",children:[e.jsx(y,{name:"edit"}),"Editar"]}),f&&(o==null?void 0:o.id)!==w._id&&e.jsxs("button",{onClick:()=>p(w),className:`btn ${w.ativo?"btn-danger":"btn-success"}`,title:w.ativo?"Desativar usuário":"Ativar usuário",children:[e.jsx(y,{name:w.ativo?"person_remove":"person_add"}),w.ativo?"Desativar":"Ativar"]}),(o==null?void 0:o.id)===w._id&&e.jsxs("span",{className:"own-user-indicator",style:{color:"#666",fontSize:"0.875rem",fontStyle:"italic",padding:"8px 12px"},children:[e.jsx(y,{name:"account_circle",style:{fontSize:"16px",marginRight:"4px"}}),"Seu usuário"]})]})]},w._id))})]})};const Cn=({onFiltroChange:a})=>{const[t,r]=u.useState(""),[s,n]=u.useState(""),[o,i]=u.useState(""),[c,d]=u.useState(""),[v,h]=u.useState([]),[l,j]=u.useState(!1);u.useEffect(()=>{f()},[]),u.useEffect(()=>{const E={busca:t.trim()||void 0,perfil:s||void 0,status:o||void 0,curso:c.trim()||void 0};a(E)},[t,s,o,c]);const f=async()=>{try{const E=await te.get("/perfis");E.success&&E.data&&Array.isArray(E.data)&&h(E.data.filter(F=>F.ativo))}catch(E){console.error("Erro ao carregar perfis:",E)}},g=()=>{r(""),n(""),i(""),d("")},p=t||s||o||c;return e.jsxs("div",{className:"filtros-usuario",children:[e.jsxs("div",{className:"filtros-header",children:[e.jsxs("h3",{children:[e.jsx(y,{name:"filter_list"}),"Filtros"]}),e.jsxs("div",{className:"filtros-actions",children:[p&&e.jsxs("button",{type:"button",onClick:g,className:"btn-limpar",title:"Limpar filtros",children:[e.jsx(y,{name:"clear_all"}),"Limpar"]}),e.jsx("button",{type:"button",onClick:()=>j(!l),className:"btn-expandir",title:l?"Recolher filtros":"Expandir filtros",children:e.jsx(y,{name:l?"expand_less":"expand_more"})})]})]}),e.jsx("div",{className:`filtros-content ${l?"expanded":""}`,children:e.jsxs("div",{className:"filtros-grid",children:[e.jsxs("div",{className:"filtro-group",children:[e.jsxs("label",{htmlFor:"busca",children:[e.jsx(y,{name:"search"}),"Buscar por nome ou email"]}),e.jsx("input",{type:"text",id:"busca",value:t,onChange:E=>r(E.target.value),placeholder:"Digite o nome ou email..."})]}),e.jsxs("div",{className:"filtro-group",children:[e.jsxs("label",{htmlFor:"perfil",children:[e.jsx(y,{name:"account_circle"}),"Perfil"]}),e.jsxs("select",{id:"perfil",value:s,onChange:E=>n(E.target.value),children:[e.jsx("option",{value:"",children:"Todos os perfis"}),v.map(E=>e.jsx("option",{value:E._id,children:E.nome},E._id))]})]}),e.jsxs("div",{className:"filtro-group",children:[e.jsxs("label",{htmlFor:"status",children:[e.jsx(y,{name:"toggle_on"}),"Status"]}),e.jsxs("select",{id:"status",value:o,onChange:E=>i(E.target.value),children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"ativo",children:"Ativo"}),e.jsx("option",{value:"inativo",children:"Inativo"})]})]}),e.jsxs("div",{className:"filtro-group",children:[e.jsxs("label",{htmlFor:"curso",children:[e.jsx(y,{name:"school"}),"Curso"]}),e.jsx("input",{type:"text",id:"curso",value:c,onChange:E=>d(E.target.value),placeholder:"Digite o curso..."})]})]})}),p&&e.jsx("div",{className:"filtros-ativos",children:e.jsxs("span",{className:"filtros-count",children:[[t,s,o,c].filter(Boolean).length," filtro(s) ativo(s)"]})})]})};const wn=({tipo:a,titulo:t,mensagem:r,duracao:s=4e3,onClose:n,visivel:o})=>{if(u.useEffect(()=>{if(o&&s>0){const c=setTimeout(()=>{n()},s);return()=>clearTimeout(c)}},[o,s,n]),!o)return null;const i=()=>{switch(a){case"sucesso":return"check_circle";case"erro":return"error";case"aviso":return"warning";case"info":return"info";default:return"info"}};return e.jsxs("div",{className:`notificacao ${a} ${o?"visivel":""}`,children:[e.jsxs("div",{className:"notificacao-container",children:[e.jsx("div",{className:"notificacao-icone",children:e.jsx(y,{name:i()})}),e.jsxs("div",{className:"notificacao-conteudo",children:[e.jsx("h4",{className:"notificacao-titulo",children:t}),r&&e.jsx("p",{className:"notificacao-mensagem",children:r})]}),e.jsx("button",{className:"notificacao-fechar",onClick:n,type:"button","aria-label":"Fechar notificação",children:e.jsx(y,{name:"close"})})]}),s>0&&e.jsx("div",{className:"notificacao-progresso",style:{animationDuration:`${s}ms`}})]})},Pn=({notificacoes:a,onRemover:t})=>e.jsx(e.Fragment,{children:a.map(r=>e.jsx(wn,{tipo:r.tipo,titulo:r.titulo,mensagem:r.mensagem,duracao:r.duracao,onClose:()=>t(r.id),visivel:!0},r.id))}),Ln=()=>{const[a,t]=u.useState([]),r=u.useCallback(v=>{const h=Math.random().toString(36).substr(2,9),l={id:h,duracao:4e3,...v};return t(j=>[...j,l]),l.duracao&&l.duracao>0&&setTimeout(()=>{s(h)},l.duracao),h},[]),s=u.useCallback(v=>{t(h=>h.filter(l=>l.id!==v))},[]),n=u.useCallback(()=>{t([])},[]),o=u.useCallback((v,h,l)=>r({tipo:"sucesso",titulo:v,mensagem:h,duracao:l}),[r]),i=u.useCallback((v,h,l)=>r({tipo:"erro",titulo:v,mensagem:h,duracao:l}),[r]),c=u.useCallback((v,h,l)=>r({tipo:"aviso",titulo:v,mensagem:h,duracao:l}),[r]),d=u.useCallback((v,h,l)=>r({tipo:"info",titulo:v,mensagem:h,duracao:l}),[r]);return{notificacoes:a,adicionarNotificacao:r,removerNotificacao:s,limparNotificacoes:n,sucesso:o,erro:i,aviso:c,info:d}};const Rn=()=>{const{hasPermission:a}=ea(),{notificacoes:t,adicionarNotificacao:r,removerNotificacao:s}=Ln(),[n,o]=u.useState(!1),[i,c]=u.useState(null),[d,v]=u.useState(!1),[h,l]=u.useState({}),j=u.useMemo(()=>h,[h]),f=a("USUARIOS_LISTAR"),g=a("USUARIOS_CRIAR");u.useEffect(()=>(n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[n]);const p=()=>{c(null),o(!0)},E=b=>{c(b),o(!0)},F=()=>{o(!1),c(null),v(!0)},w=()=>{o(!1),c(null)},_=(b,R)=>{r({titulo:b,mensagem:R,tipo:"sucesso",duracao:5e3})},B=(b,R)=>{r({titulo:b,mensagem:R,tipo:"erro",duracao:7e3})},I=()=>{v(!1)},U=u.useCallback(b=>{l(b)},[]);return f?e.jsxs("div",{className:"usuarios-page",children:[e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"page-title",children:[e.jsxs("h1",{children:[e.jsx(y,{name:"people"}),"Gerenciamento de Usuários"]}),e.jsx("p",{children:"Gerencie os usuários do sistema e suas permissões"})]})}),e.jsxs("div",{className:"page-content",children:[e.jsx("div",{className:"page-actions",children:g&&e.jsxs("button",{onClick:p,className:"btn btn-primary",children:[e.jsx(y,{name:"person_add"}),"Novo Usuário"]})}),e.jsx(Cn,{onFiltroChange:U}),e.jsx(Sn,{filtros:j,onEditar:E,atualizar:d,onAtualizarComplete:I})]})]}),e.jsx(Se,{isOpen:n,onClose:w,title:i?"Editar Usuário":"Novo Usuário",size:"large",className:"modal-usuarios",children:e.jsx(En,{usuarioParaEditar:i,onSalvar:F,onCancelar:w,onSucesso:_,onErro:B})}),e.jsx(Pn,{notificacoes:t,onRemover:s})]}):e.jsx("div",{className:"usuarios-page",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"access-denied",children:[e.jsx(y,{name:"block"}),e.jsx("h2",{children:"Acesso Negado"}),e.jsx("p",{children:"Você não tem permissão para visualizar usuários."})]})})})};const Dn=()=>{const{hasPermission:a}=ea(),[t,r]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState(!0),[c,d]=u.useState("permissoes"),[v,h]=u.useState(!1),[l,j]=u.useState(!1),[f,g]=u.useState(null),[p,E]=u.useState(null),[F,w]=u.useState({nome:"",codigo:"",modulo:"",descricao:"",ativo:!0}),[_,B]=u.useState({nome:"",descricao:"",permissoes:[],ativo:!0}),I=a("PERMISSOES_LISTAR"),U=a("PERMISSOES_CRIAR"),b=a("PERMISSOES_EDITAR"),R=a("PERMISSOES_EXCLUIR"),C=a("PERFIS_LISTAR"),N=a("PERFIS_CRIAR"),M=a("PERFIS_EDITAR"),J=a("PERFIS_EXCLUIR");u.useEffect(()=>{(I||C)&&ae()},[I,C]);const ae=async()=>{try{i(!0);const D=[];I&&(D.push(te.get("/permissoes")),D.push(te.get("/permissoes/modulos"))),C&&D.push(te.get("/perfis"));const W=await Promise.all(D);let V=0;if(I){V++;const K=W[V++];K.success&&n(K.data||[])}if(C&&W[V]){const K=W[V];K.success&&r(K.data||[])}}catch(D){console.error("Erro ao carregar dados:",D),alert("Erro ao carregar dados")}finally{i(!1)}},re=async D=>{var W,V;D.preventDefault();try{const K=f?`/permissoes/${f._id}`:"/permissoes",me=await te[f?"put":"post"](K,F);me.success&&(alert(me.message||"Operação realizada com sucesso"),h(!1),H(),ae())}catch(K){console.error("Erro ao salvar permissão:",K);const ee=((V=(W=K.response)==null?void 0:W.data)==null?void 0:V.message)||"Erro ao salvar permissão";alert(ee)}},de=D=>{b&&(g(D),w({nome:D.nome,codigo:D.codigo,modulo:D.modulo,descricao:D.descricao||"",ativo:D.ativo}),h(!0))},je=async D=>{var V,K;if(!(!R||!window.confirm(`Tem certeza que deseja desativar a permissão ${D.nome}?`)))try{const ee=await te.delete(`/permissoes/${D._id}`);ee.success&&(alert(ee.message||"Permissão desativada com sucesso"),ae())}catch(ee){console.error("Erro ao excluir permissão:",ee);const me=((K=(V=ee.response)==null?void 0:V.data)==null?void 0:K.message)||"Erro ao excluir permissão";alert(me)}},be=async D=>{var W,V;D.preventDefault();try{const K=p?`/perfis/${p._id}`:"/perfis",me=await te[p?"put":"post"](K,_);me.success&&(alert(me.message||"Operação realizada com sucesso"),j(!1),T(),ae())}catch(K){console.error("Erro ao salvar perfil:",K);const ee=((V=(W=K.response)==null?void 0:W.data)==null?void 0:V.message)||"Erro ao salvar perfil";alert(ee)}},P=D=>{M&&(E(D),B({nome:D.nome,descricao:D.descricao||"",permissoes:Array.isArray(D.permissoes)?D.permissoes.map(W=>typeof W=="string"?W:W._id||""):[],ativo:D.ativo}),j(!0))},k=async D=>{var V,K;if(!(!J||!window.confirm(`Tem certeza que deseja desativar o perfil ${D.nome}?`)))try{const ee=await te.delete(`/perfis/${D._id}`);ee.success&&(alert(ee.message||"Perfil desativado com sucesso"),ae())}catch(ee){console.error("Erro ao excluir perfil:",ee);const me=((K=(V=ee.response)==null?void 0:V.data)==null?void 0:K.message)||"Erro ao excluir perfil";alert(me)}},H=()=>{w({nome:"",codigo:"",modulo:"",descricao:"",ativo:!0}),g(null)},T=()=>{B({nome:"",descricao:"",permissoes:[],ativo:!0}),E(null)},Y=(D,W)=>{B(W?V=>({...V,permissoes:[...V.permissoes,D]}):V=>({...V,permissoes:V.permissoes.filter(K=>K!==D)}))};return!I&&!C?e.jsx("div",{className:"permissoes-container",children:e.jsxs("div",{className:"access-denied",children:[e.jsx("h2",{children:"Acesso Negado"}),e.jsx("p",{children:"Você não tem permissão para visualizar permissões ou perfis."})]})}):o?e.jsx("div",{className:"loading",children:"Carregando dados..."}):e.jsxs("div",{className:"permissoes-container",children:[e.jsx("div",{className:"permissoes-header",children:e.jsx("h1",{children:"Gerenciamento de Permissões e Perfis"})}),e.jsxs("div",{className:"tabs",children:[I&&e.jsx("button",{className:`tab ${c==="permissoes"?"active":""}`,onClick:()=>d("permissoes"),children:"Permissões"}),C&&e.jsx("button",{className:`tab ${c==="perfis"?"active":""}`,onClick:()=>d("perfis"),children:"Perfis"})]}),c==="permissoes"&&I&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Permissões"}),U&&e.jsx("button",{className:"btn-primary",onClick:()=>h(!0),children:"Nova Permissão"})]}),e.jsx("div",{className:"modulos-grid",children:s.map(D=>e.jsxs("div",{className:"modulo-card",children:[e.jsx("h3",{className:"modulo-title",children:D._id}),e.jsx("div",{className:"permissoes-list",children:D.permissoes.map(W=>e.jsxs("div",{className:"permissao-item",children:[e.jsxs("div",{className:"permissao-info",children:[e.jsx("span",{className:"permissao-nome",children:W.nome}),e.jsx("span",{className:"permissao-codigo",children:W.codigo}),W.descricao&&e.jsx("span",{className:"permissao-desc",children:W.descricao})]}),e.jsxs("div",{className:"permissao-actions",children:[b&&e.jsx("button",{className:"btn-edit-small",onClick:()=>de(W),children:"Editar"}),R&&e.jsx("button",{className:"btn-delete-small",onClick:()=>je(W),children:"Excluir"})]})]},W._id))})]},D._id))})]}),c==="perfis"&&C&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Perfis"}),N&&e.jsx("button",{className:"btn-primary",onClick:()=>j(!0),children:"Novo Perfil"})]}),e.jsx("div",{className:"perfis-grid",children:t.map(D=>e.jsxs("div",{className:"perfil-card",children:[e.jsxs("div",{className:"perfil-info",children:[e.jsx("h3",{children:D.nome}),D.descricao&&e.jsx("p",{className:"perfil-desc",children:D.descricao}),e.jsx("span",{className:`status ${D.ativo?"ativo":"inativo"}`,children:D.ativo?"Ativo":"Inativo"}),e.jsx("div",{className:"perfil-permissoes",children:e.jsxs("span",{className:"permissoes-count",children:[Array.isArray(D.permissoes)?D.permissoes.length:0," permissões"]})})]}),e.jsxs("div",{className:"perfil-actions",children:[M&&e.jsx("button",{className:"btn-edit",onClick:()=>P(D),children:"Editar"}),J&&D.ativo&&e.jsx("button",{className:"btn-delete",onClick:()=>k(D),children:"Desativar"})]})]},D._id))})]}),v&&e.jsx(Se,{isOpen:v,title:f?"Editar Permissão":"Nova Permissão",onClose:()=>{h(!1),H()},className:"modal-permissoes",children:e.jsxs("form",{onSubmit:re,className:"permissao-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nome",children:"Nome:"}),e.jsx("input",{type:"text",id:"nome",value:F.nome,onChange:D=>w({...F,nome:D.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"codigo",children:"Código:"}),e.jsx("input",{type:"text",id:"codigo",value:F.codigo,onChange:D=>w({...F,codigo:D.target.value.toUpperCase()}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"modulo",children:"Módulo:"}),e.jsxs("select",{id:"modulo",value:F.modulo,onChange:D=>w({...F,modulo:D.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Selecione um módulo"}),e.jsx("option",{value:"locais",children:"Locais"}),e.jsx("option",{value:"eventos",children:"Eventos"}),e.jsx("option",{value:"cursos",children:"Cursos"}),e.jsx("option",{value:"usuarios",children:"Usuários"}),e.jsx("option",{value:"permissoes",children:"Permissões"}),e.jsx("option",{value:"relatorios",children:"Relatórios"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descricao",children:"Descrição:"}),e.jsx("textarea",{id:"descricao",value:F.descricao,onChange:D=>w({...F,descricao:D.target.value}),rows:3})]}),f&&e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:F.ativo,onChange:D=>w({...F,ativo:D.target.checked})}),"Permissão ativa"]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),H()},className:"btn-secondary",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-primary",children:f?"Salvar":"Criar"})]})]})}),l&&e.jsx(Se,{isOpen:l,title:p?"Editar Perfil":"Novo Perfil",onClose:()=>{j(!1),T()},size:"large",className:"modal-permissoes",children:e.jsxs("form",{onSubmit:be,className:"perfil-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nome",children:"Nome:"}),e.jsx("input",{type:"text",id:"nome",value:_.nome,onChange:D=>B({..._,nome:D.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descricao",children:"Descrição:"}),e.jsx("textarea",{id:"descricao",value:_.descricao,onChange:D=>B({..._,descricao:D.target.value}),rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Permissões:"}),e.jsx("div",{className:"permissoes-selection",children:s.map(D=>e.jsxs("div",{className:"modulo-section",children:[e.jsx("h4",{className:"modulo-header",children:D._id}),e.jsx("div",{className:"permissoes-checkboxes",children:D.permissoes.map(W=>e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:_.permissoes.includes(W._id),onChange:V=>Y(W._id,V.target.checked)}),e.jsxs("span",{className:"checkbox-label",children:[W.nome,e.jsxs("small",{children:["(",W.codigo,")"]})]})]},W._id))})]},D._id))})]}),p&&e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:_.ativo,onChange:D=>B({..._,ativo:D.target.checked})}),"Perfil ativo"]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>{j(!1),T()},className:"btn-secondary",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-primary",children:p?"Salvar":"Criar"})]})]})})]})};const _n=()=>{const a=Ka(),{login:t}=ea(),[r,s]=u.useState({email:"",senha:""}),[n,o]=u.useState(!1),[i,c]=u.useState(""),d=h=>{s(l=>({...l,[h.target.name]:h.target.value})),i&&c("")},v=async h=>{if(h.preventDefault(),!n){o(!0),c("");try{const l=await dn.login(r);if(l.success&&l.data){console.log("Login realizado com sucesso:",l.data);const j=l.data.expiresAt?new Date(l.data.expiresAt):void 0;t(l.data.user,l.data.token,j),a("/")}else c(l.message)}catch(l){console.error("Erro no login:",l),c("Erro interno do servidor")}finally{o(!1)}}};return e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"logo-section",children:e.jsx("img",{src:"https://www.ubm.br/seminario-pesquisa/images/logo.png",alt:"Logo do Seminário UBM",className:"seminario-logo"})}),e.jsx("h2",{children:"Fazer Login"}),e.jsx("p",{children:"Sistema administrativo de atividades do seminário"})]}),e.jsxs("form",{className:"login-form",onSubmit:v,children:[i&&e.jsx("div",{className:"error-message",style:{color:"#ff4444",backgroundColor:"#ffe6e6",padding:"10px",borderRadius:"4px",marginBottom:"20px",border:"1px solid #ffcccc"},children:i}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"E-mail:"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:d,required:!0,placeholder:"seu@email.com",disabled:n,autoComplete:"email",inputMode:"email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"senha",children:"Senha:"}),e.jsx("input",{type:"password",id:"senha",name:"senha",value:r.senha,onChange:d,required:!0,placeholder:"••••••••",disabled:n,autoComplete:"current-password"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:n,style:{opacity:n?.6:1,cursor:n?"not-allowed":"pointer"},children:n?"Entrando...":"Entrar"})]})]})})})})};const la=()=>{try{if(!localStorage.getItem("authToken"))throw Ua("/login");return null}catch{throw Ua("/login")}},Fn=Hr([{path:"/",element:e.jsx(ln,{}),children:[{index:!0,element:e.jsx(_t,{})},{path:"cronograma",element:e.jsx(_t,{})},{path:"login",element:e.jsx(_n,{})},{path:"eventos",element:e.jsx(fn,{}),loader:la},{path:"trabalhos",loader:()=>Ua("/eventos")},{path:"locais",element:e.jsx(gn,{}),loader:la},{path:"cursos",element:e.jsx(Nn,{}),loader:la},{path:"usuarios",element:e.jsx(Rn,{}),loader:la},{path:"permissoes",element:e.jsx(Dn,{}),loader:la}]}],{future:{v7_startTransition:!0,v7_relativeSplatPath:!0}});Oa.createRoot(document.getElementById("root")).render(e.jsx(ps.StrictMode,{children:e.jsx(rn,{children:e.jsx(Qr,{router:Fn,future:{v7_startTransition:!0,v7_relativeSplatPath:!0}})})}));
